<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type="text/xsl" title="XSL Formatting" href="/rss.xsl" media="all" ?>

<rss version="2.0">
	
	<channel>
		
		<title>搞怪的索引</title>
		
		<image>
			
			<link>http://blog.csdn.net</link>
			
			<url>http://static.blog.csdn.net/images/logo.gif</url>
			
		</image>
		
		<description>个人技术博客</description>
		\t
		<link>http://blog.csdn.net/xuelanggongwu</link>
		\t
		<language>zh-cn</language>
		\t
		<generator>http://blog.csdn.net</generator>
		\t
		<ttl>5</ttl>
		\t
		<copyright><![CDATA[Copyright &copy; xuelanggongwu]]></copyright>
		\t
		<pubDate>2013-9-2 8:22:07</pubDate>
		
		<item>
			
			<title><![CDATA[[原]buffer cache]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/10222703</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/10222703</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-23 14:40:28</pubDate>
			
			<description><![CDATA[            <p>今天看到一ocp关于buffer cache 的题目，在这里记录一下</p><p><span style="color:#ff6666">Which is the correct description of a pinned buffer in the database buffer cache?</span></p>A.The buffer is currently being accessed.<br>B.The buffer is empty and has not been used.<br>C.The contents of the buffer have changed and must be flushed to the disk by the DBWn process.<br>D.The buffer is a candidate for immediate aging out and its contents are synchronized with the<br><p>block contents on the disk.</p><p><br></p><p>Correct Answers:A</p><p>解释：</p><p>bufer cache 分为free buffer<br>pinned &nbsp;buffer &nbsp;和 dirty buffer&nbsp;<br>free 是可以使用的buffer<br>pinned &nbsp;buffer 是正在使用的buffer<br>dirty buffer 是已经改变了的buffer<br></p>            <div>                作者：xuelanggongwu 发表于2013-8-23 14:40:28 <a href="http://blog.csdn.net/perfect_db/article/details/10222703">原文链接</a>            </div>            <div>            阅读：15 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/10222703#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[转]Oracle natural join(自然连接)]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/10168945</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/10168945</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-22 8:12:02</pubDate>
			
			<description><![CDATA[            <p>摘自：&nbsp;<a target="_blank" href="http://www.blogjava.net/stevenjohn/archive/2012/12/04/392444.html">http://www.blogjava.net/stevenjohn/archive/2012/12/04/392444.html</a></p><p><br></p><p></p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">虽然natural join(自然连接)实际上的用的比较少，但实际上这个<a target="_blank" href="http://www.52oracle.com/join" target="_blank" style="color:rgb(68,68,68); text-decoration:none">连接</a>是非常有用的，若能经常使用一下，实际上是非常方便的。</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">自然连接是在两张表中寻找那些数据类型和列名都相同的字段，然后自动地将他们连接起来，并返回所有符合条件按的结果。</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">来看一下自然连接的例子。</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">Select emp.ename,dept.dname</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">From emp natural join dept;</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">这里我们并没有指定连接的条件，实际上oracle为我们自作主张的将，emp中的deptno和dept中的deptno做了连接。</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">也就是实际上相当于</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">Select emp.ename,dept.dname</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">From emp join dept on emp.deptno = dept.deptno;</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">因为这两张表的这两个字段deptno的类型个名称完全相同。所以使用natural join时被自然的连接在一起了。</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px"></p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">另外：</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">1.如果做自然连接的两个表的有多个字段都满足有相同名称个类型，那么他们会被作为自然连接的条件。</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">2.如果自然连接的两个表仅是字段名称相同，但数据类型不同，那么将会返回一个错误。</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">3.由于oracle中可以进行这种非常简单的natural join，我们在设计表时，应该尽量在不同表中具有相同含义的字段使用相同的名字和数据类型。以方便以后使用natural join</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">最后我们在前面举的例子都得到以下的结果：</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">SQL&gt; Select emp.ename,dept.dname</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">2 From emp natural join dept;</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px"></p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">ENAME DNAME</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">——————– —————-</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">SMITH RESEARCH</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">ALLEN SALES</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">WARD SALES</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">JONES RESEARCH</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">MARTIN SALES</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">BLAKE SALES</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">CLARK ACCOUNTING</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">SCOTT RESEARCH</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">KING ACCOUNTING</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">TURNER SALES</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">ADAMS RESEARCH</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">JAMES SALES</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">FORD RESEARCH</p><p style="color:rgb(51,51,51); font-family:verdana,sans-serif; font-size:13px; line-height:17px">MILLER ACCOUNTING</p><br>            <div>                作者：xuelanggongwu 发表于2013-8-22 8:12:02 <a href="http://blog.csdn.net/perfect_db/article/details/10168945">原文链接</a>            </div>            <div>            阅读：17 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/10168945#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]merge  into 相关操作]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/10051295</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/10051295</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-18 20:30:25</pubDate>
			
			<description><![CDATA[            <p><span style="color:#3366ff">今天看ocp题，有一个新的发现：</span></p><p><br></p><p>View the Exhibit and examine the data in ORDERS_MASTER and MONTHLY_ORDERS<br>tables. Evaluate the following MERGE statement:<br></p><p>MERGE INTO orders_master o<br>USING monthly_orders m<br>ON (o.order_id = m.order_id)<br><span style="color:#ff6666">WHEN MATCHED THEN</span><br><span style="color:#ff6666">UPDATE</span> SET o.order_total = m.order_total<br><span style="color:#ff6666">DELETE</span> WHERE (m.order_total IS NULL)<br>WHEN NOT MATCHED THEN<br>INSERT VALUES (m.order_id, m.order_total);</p><p><br><span style="color:#ff6666">What would be the outcome of the above statement?</span><br></p><p><img src="" alt=""><br></p><p>A. The ORDERS_MASTER table would contain the ORDER_IDs 1 and 2.<br>B. The ORDERS_MASTER table would contain the ORDER_IDs 1, 2 and 3.<br>C. The ORDERS_MASTER table would contain the ORDER_IDs 1, 2 and 4.<br>D. The ORDERS_MASTER table would contain the ORDER_IDs 1, 2, 3 and 4.</p><p><br>Answer: C<br></p><p><span style="color:#3366ff">当匹配上 的时候竟然可以执行两种操作；经过实验发现，这两种操作针对的是相同的行(两表匹配上的行)，其余行不考虑；</span></p>            <div>                作者：xuelanggongwu 发表于2013-8-18 20:30:25 <a href="http://blog.csdn.net/perfect_db/article/details/10051295">原文链接</a>            </div>            <div>            阅读：32 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/10051295#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]index (与索引有关的知识点)]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/10043979</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/10043979</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-18 12:06:25</pubDate>
			
			<description><![CDATA[            <p>今天看ocp题库，发现了一个新知识点，原来索引还可以这样创建；</p><p>CREATE TABLE order_item (order_id NUMBER(3),item_id NUMBER(2),qty NUMBER(4),</p>CONSTRAINT ord_itm_id_pk &nbsp;PRIMARY KEY (order_id,item_id)<br><p><span style="color:#ff6666">USING INDEX</span><span style="color:#333333">(</span><span style="color:#3366ff">CREATE INDEX</span>ord_itm_idx ON order_item(order_id,item_id)));</p><p><br></p><p><span style="color:#3366ff">表创建成功以后，在列order_id和item_id上只有一个普通索引ord_itm_idx;如果不用using index 子句，那么只会创建一个与主键约束一样名字的唯一索引；</span></p><p><span style="color:#3366ff"><br></span></p><p><span style="color:#3366ff">当然也可以先创建表，然后创建一个索引，再添加一个主键约束并用using index子句使用哪个已有的索引；</span></p><p><span style="color:#3366ff"><br></span></p><p><span style="color:#3366ff">下面两道题目说明了这两个知识点：</span></p><p>QUESTION 48<br><span style="color:#ff6666">Evaluate the following CREATE TABLE command:</span><br>CREATE TABLE order_item<br>(order_id NUMBER(3),<br>item_id NUMBER(2),<br>qty NUMBER(4),<br>CONSTRAINT ord_itm_id_pk<br>PRIMARY KEY (order_id,item_id)<br>USING INDEX<br>(CREATE INDEX ord_itm_idx<br>ON order_item(order_id,item_id)));<br><span style="color:#ff6666">Which statement is true regarding the above SQL statement?</span><br><span style="color:#333333">A. It would execute successfully and only ORD_ITM_IDX index would be created.<br>B. It would give an error because the USING INDEX clause cannot be used on a composite primary key.<br>C. It would execute successfully and two indexes ORD_ITM_IDX and ORD_ITM_ID_PK would be created.<br>D. It would give an error because the USING INDEX clause is not permitted in the CREATE TABLE&nbsp;command.</span><br></p><p><span style="color:#3366ff">Answer: A<br></span></p><p><span style="color:#3366ff"><br></span></p><p>QUESTION 41<br></p><p><span style="color:#ff6666">View the Exhibit and examine the structure of the EMP table.</span></p><p><span style="color:#3366ff"><img src="http://img.blog.csdn.net/20130818120403546?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></span><br>You executed the following command to add a primary key to the EMP table:<br>ALTER TABLE emp<br>ADD CONSTRAINT emp_id_pk PRIMARY KEY (emp_id)<br>USING INDEX emp_id_idx;</p><p><br><span style="color:#ff6666">Which statement is true regarding the effect of the command?</span></p><p><br>A. The PRIMARY KEY is created along with a new index.<br>B. The PRIMARY KEY is created and it would use an existing unique index.<br>C. The PRIMARY KEY would be created in a disabled state because it is using an existing index.<br>D. The statement produces an error because the USING clause is permitted only in the&nbsp;CREATE TABLE command.</p><p><span style="color:#3366ff"><br>Answer: B<br></span></p>            <div>                作者：xuelanggongwu 发表于2013-8-18 12:06:25 <a href="http://blog.csdn.net/perfect_db/article/details/10043979">原文链接</a>            </div>            <div>            阅读：48 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/10043979#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]view （视图定义中含distinct时的操作）]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/10028185</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/10028185</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-17 16:46:57</pubDate>
			
			<description><![CDATA[            <p><br></p><p>SQL&gt;<span style="color:#ff6666"> select * from v$version;</span></p>BANNER<br>--------------------------------------------------------------------------------<br>Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production<br>PL/SQL Release 11.2.0.1.0 - Production<br>CORE<span style="white-space:pre"> </span>11.2.0.1.0<span style="white-space:pre"></span>Production<br>TNS for 32-bit Windows: Version 11.2.0.1.0 - Production<br><p>NLSRTL Version 11.2.0.1.0 - Production</p><p>SQL&gt;<span style="color:#ff6666">SELECT * from student;</span></p><p><table border="0" cellpadding="0" cellspacing="0" width="192" style="border-collapse:collapse; width:144pt"><colgroup><col width="64" span="3" style="width:48pt"></colgroup><tbody><tr height="17" style="height:12.75pt"><td height="17" width="64" style="height:12.75pt; width:48pt">ID</td><td width="64" style="width:48pt">NAME</td><td width="64" style="width:48pt">SCORE</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">1</td><td>Aaron</td><td align="right">78</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">2</td><td>Bill</td><td align="right">76</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">3</td><td>Cindy</td><td align="right">89</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">4</td><td>Damon</td><td align="right">90</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">5</td><td>Ella</td><td align="right">73</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">6</td><td>Frado</td><td align="right">61</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">7</td><td>Gill</td><td align="right">99</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">8</td><td>Hellen</td><td align="right">56</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">9</td><td>Ivan</td><td align="right">93</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">10</td><td>Jay</td><td align="right">90</td></tr></tbody></table><br>SQL&gt;<span style="color:#ff6666">CREATE OR REPLACE VIEW v_student AS SELECT &nbsp; ID,NAME AS v_name FROM student;</span></p><p>SQL&gt;select * from v_student<br></p><p><table border="0" cellpadding="0" cellspacing="0" width="128" style="border-collapse:collapse; width:96pt"><colgroup><col width="64" span="2" style="width:48pt"></colgroup><tbody><tr height="17" style="height:12.75pt"><td height="17" width="64" style="height:12.75pt; width:48pt">ID</td><td width="64" style="width:48pt">V_NAME</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">1</td><td>Aaron</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">2</td><td>Bill</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">3</td><td>Cindy</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">4</td><td>Damon</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">5</td><td>Ella</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">6</td><td>Frado</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">7</td><td>Gill</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">8</td><td>Hellen</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">9</td><td>Ivan</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">10</td><td>Jay</td></tr></tbody></table><br>SQL&gt;<span style="color:#ff6666">UPDATE v_student f SET f.v_name='youjinge' WHERE ID=1;</span><br><table border="0" cellpadding="0" cellspacing="0" width="192" class=" " style="border-collapse:collapse; width:144pt"><colgroup><col width="64" span="3" style="width:48pt"></colgroup><tbody><tr height="17" style="height:12.75pt"><td height="17" width="64" style="height:12.75pt; width:48pt">ID</td><td width="64" style="width:48pt">NAME</td><td width="64" style="width:48pt">SCORE</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">1</td><td><span style="color:#ff6666">youjinge</span></td><td align="right">78</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">2</td><td>Bill</td><td align="right">76</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">3</td><td>Cindy</td><td align="right">89</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">4</td><td>Damon</td><td align="right">90</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">5</td><td>Ella</td><td align="right">73</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">6</td><td>Frado</td><td align="right">61</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">7</td><td>Gill</td><td align="right">99</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">8</td><td>Hellen</td><td align="right">56</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">9</td><td>Ivan</td><td align="right">93</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">10</td><td>Jay</td><td align="right">90<br></td></tr></tbody></table><br></p><p>SQL&gt;select * from v_student<br></p><table border="0" cellpadding="0" cellspacing="0" width="128" class=" " style="border-collapse:collapse; width:96pt"><colgroup><col width="64" span="2" style="width:48pt"></colgroup><tbody><tr height="17" style="height:12.75pt"><td height="17" width="64" style="height:12.75pt; width:48pt">ID</td><td width="64" style="width:48pt">V_NAME</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">1</td><td><span style="color:#ff6666">youjinge</span></td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">2</td><td>Bill</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">3</td><td>Cindy</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">4</td><td>Damon</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">5</td><td>Ella</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">6</td><td>Frado</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">7</td><td>Gill</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">8</td><td>Hellen</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">9</td><td>Ivan</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">10</td><td>Jay</td></tr></tbody></table><br>SQL&gt;<span style="color:#ff6666">DELETE v_student m WHERE m.ID=1;</span><br><br><table border="0" cellpadding="0" cellspacing="0" width="192" style="border-collapse:collapse; width:144pt"><colgroup><col width="64" span="3" style="width:48pt"></colgroup><tbody><tr height="17" style="height:12.75pt"><td height="17" width="64" style="height:12.75pt; width:48pt">ID</td><td width="64" style="width:48pt">NAME</td><td width="64" style="width:48pt">SCORE</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">2</td><td>Bill</td><td align="right">76</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">3</td><td>Cindy</td><td align="right">89</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">4</td><td>Damon</td><td align="right">90</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">5</td><td>Ella</td><td align="right">73</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">6</td><td>Frado</td><td align="right">61</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">7</td><td>Gill</td><td align="right">99</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">8</td><td>Hellen</td><td align="right">56</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">9</td><td>Ivan</td><td align="right">93</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">10</td><td>Jay</td><td align="right">90</td></tr></tbody></table><br><br><p>SQL&gt;<span style="color:#ff6666">select * from v_student</span><br></p><table border="0" cellpadding="0" cellspacing="0" width="128" style="border-collapse:collapse; width:96pt"><colgroup><col width="64" span="2" style="width:48pt"></colgroup><tbody><tr height="17" style="height:12.75pt"><td height="17" width="64" style="height:12.75pt; width:48pt">ID</td><td width="64" style="width:48pt">V_NAME</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">2</td><td>Bill</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">3</td><td>Cindy</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">4</td><td>Damon</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">5</td><td>Ella</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">6</td><td>Frado</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">7</td><td>Gill</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">8</td><td>Hellen</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">9</td><td>Ivan</td></tr><tr height="17" style="height:12.75pt"><td height="17" align="right" style="height:12.75pt">10</td><td>Jay</td></tr></tbody></table><br><span style="color:#3366ff">改变视图定义（加入distinct）</span><p>SQL&gt;<span style="color:#ff6666">CREATE OR REPLACE VIEW v_student AS SELECT</span> DISTINCT<span style="color:#ff6666"> &nbsp;ID,NAME AS v_name FROM student;</span></p><p><span style="color:#ff6666">无论删除还是更新（dml）都会出现下面的错误；<br></span><img src="http://img.blog.csdn.net/20130817163239156?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p><p><br></p><p><br><br><br></p>            <div>                作者：xuelanggongwu 发表于2013-8-17 16:46:57 <a href="http://blog.csdn.net/perfect_db/article/details/10028185">原文链接</a>            </div>            <div>            阅读：49 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/10028185#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[转]pivoting insert（旋转插入）]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9962841</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9962841</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-14 13:24:04</pubDate>
			
			<description><![CDATA[            <p>看了这篇文章，我理解了平时用过“旋转插入”方法，只是理论上不知道；在这转载一篇文章，理论结合实际看看pivoting &nbsp;insert 的用法及用处；</p><p>文章来自：<a target="_blank" href="http://blog.sina.com.cn/s/blog_854ec93b0101adeh.html">http://blog.sina.com.cn/s/blog_854ec93b0101adeh.html</a></p><p><br></p><p><span style="background-color:rgb(255,255,255)"><span style="color:rgb(70,70,70); font-family:simsun; font-size:14px; line-height:21px">pivoting insert（旋转插入）</span><span style="color:rgb(70,70,70); font-family:simsun; font-size:14px; line-height:21px"></span></span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)"><strong>　　</strong></span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　这节主要讨论使用pivoting insert 实现将非关系性表记录转换为关系型表中存储。Pivot 旋转是OLAP 中的一个基本改变，提供多维度数据分析。比如一个表为sales_source_data,里面的列为</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　employee_id number,week_id number,sales_mon number,sales_tue number,sales_wed number,sales_thur number,sales_fri number 员工id，周id，其他的是工作日的每天的销售记录。</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　现在要把数据转到sales_info表中，这个表的列为employee_id,week_id,sales。</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　要实现这个转换可以使用pivoting insert 操作。和insert all类&#20284;，只不过这里的多表都是同一个表。</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　insert all</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　into sales_info values(employee_id,week_id,sales_mon) --分别按每个工作日插入</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　into sales_info values(employee_id,week_id,sales_tue)</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　into sales_info values(employee_id,week_id,sales_wed)</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　into sales_info values(employee_id,week_id,sales_thur)</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　into sales_info values(employee_id,week_id,sales_fri)</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　select employee_id,week_id,sales_mon,sales_tue,sales_wed,sales_thur,sales_fri</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　from sales_source_data;</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　比如原来的sales_source_data 中只有一条记录，那么插入到sales_info 中就变成了5 条记录。</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　select * from sales_source_data;</span></p><p style="margin-top:0px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; color:rgb(70,70,70); font-family:simsun; font-size:14px"><span style="background-color:rgb(255,255,255)">　　select * from sales_info;</span></p><br>            <div>                作者：xuelanggongwu 发表于2013-8-14 13:24:04 <a href="http://blog.csdn.net/perfect_db/article/details/9962841">原文链接</a>            </div>            <div>            阅读：16 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/9962841#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]data pump（数据泵）]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9952861</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9952861</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-13 19:14:40</pubDate>
			
			<description><![CDATA[            <p><span style="color:#3366ff">先给出oracle给出的一个定义：</span></p><p><span style="color:rgb(34,34,34); font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">“Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another.“ &nbsp;</span><br></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><span style="color:#3366ff">听起来很牛的玩意，理论暂不去考虑，先来几个操作过过瘾；</span></span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><span style="color:#3366ff">（<span style="color:rgb(255,0,0); font-family:Arial; font-size:14px; line-height:26px">Blog:&nbsp;&nbsp;&nbsp;&nbsp;http://blog.csdn.net/perfect_db</span>）</span></span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">SQL&gt;<span style="color:#ff6666">select * from v$version;</span><br>BANNER<br>----------------------------------------------------------------<br>Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - Prod<br>PL/SQL Release 10.2.0.3.0 - Production<br>CORE &nbsp; &nbsp;10.2.0.3.0 &nbsp; &nbsp; &nbsp;Production<br>TNS for 32-bit Windows: Version 10.2.0.3.0 - Production<br>NLSRTL Version 10.2.0.3.0 - Production</span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><br></span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><span style="color:#3366ff">查看一下预定义的目录情况</span></span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">SQL&gt;<span style="color:#ff6666">select * from dba_directories;</span><br>OWNER &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DIRECTORY_NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DIRECTORY_PATH<br>-------------------- ------------------------------ -----------------------------------------------------------------<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SUBDIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C:\\oracle\\product\\10.2.0\\db_1\\demo\\schema\\order_entry\\/2002/Sep<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;XMLDIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C:\\oracle\\product\\10.2.0\\db_1\\demo\\schema\\order_entry\\<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MEDIA_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;C:\\oracle\\product\\10.2.0\\db_1\\demo\\schema\\product_media\\<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LOG_FILE_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C:\\oracle\\product\\10.2.0\\db_1\\demo\\schema\\log\\<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;WORK_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C:\\ADE\\aime_vista_ship\\oracle/work<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DATA_FILE_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;C:\\oracle\\product\\10.2.0\\db_1\\demo\\schema\\sales_history\\<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DATA_PUMP_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;C:\\oracle\\product\\10.2.0\\admin\\zmmctest\\dpdump\\<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ADMIN_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;C:\\ADE\\aime_vista_ship\\oracle/md/admin<br></span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">已选择8行</span><br></span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><br></span></span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff">在C盘下新建数据泵导入导出数据目录和日志目录etl、etl_log</span></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff">之后用PL/SQL 在数据库中注册刚才创建数据泵导入导出数据目录和日志目录</span></span></p><p></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">SQL&gt;</span><span style="color:#ff6666">create directory data_dir as 'c:\\etl'</span></p><p>目录已创建</p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">SQL&gt;</span><span style="color:#ff6666"><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">c</span>reate directory log_dir as 'c:\\etl_log'</span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">目录已创建</span><br></p><p><span style="color:#3366ff">随后就把这两个目录的读写权限授予用户A</span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">SQL&gt;</span><span style="color:#ff6666">grant read,write on directory data_dir to orabw</span></p><p>授权成功</p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">SQL&gt;</span><span style="color:#ff6666"><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">g</span>rant read,write on directory log_dir to<span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">orabw</span></span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">授权成功</span><br></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><br></span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">SQL&gt;<span style="color:#ff6666">select * from dba_directories;</span><br>OWNER &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DIRECTORY_NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DIRECTORY_PATH<br>-------------------- ------------------------------ -----------------------------------------------------------------<br><span style="color:#ff6666">SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LOG_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;c:\\etl_log<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DATA_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c:\\etl</span><br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SUBDIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C:\\oracle\\product\\10.2.0\\db_1\\demo\\schema\\order_entry\\/2002/Sep<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;XMLDIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C:\\oracle\\product\\10.2.0\\db_1\\demo\\schema\\order_entry\\<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MEDIA_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;C:\\oracle\\product\\10.2.0\\db_1\\demo\\schema\\product_media\\<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LOG_FILE_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C:\\oracle\\product\\10.2.0\\db_1\\demo\\schema\\log\\<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;WORK_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C:\\ADE\\aime_vista_ship\\oracle/work<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DATA_FILE_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;C:\\oracle\\product\\10.2.0\\db_1\\demo\\schema\\sales_history\\<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DATA_PUMP_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;C:\\oracle\\product\\10.2.0\\admin\\zmmctest\\dpdump\\<br>SYS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ADMIN_DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;C:\\ADE\\aime_vista_ship\\oracle/md/admin<br><br>已选择10行<br></span></p><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><br></span></p><p><span style="color:#3366ff">再在&nbsp;c:\\etl&nbsp;里创建数据泵导出文件并编辑,文件名称为expdp01.txt ,内容如下：</span></p><p><span style="color:red"></span></p>DIRECTORY=DATA_DIR<br>USERID=ORABW/ORABW<br>TABLES=PRODUCTS<br>CONTENT=ALL<br>DUMPFILE=expdat.DMP<br>LOGFILE=LOG_DIR:ETL_LOG.TXT<p></p><p>&nbsp;</p><p><span style="color:#3366ff">执行导出</span></p><p>C:\\Documents and Settings\\Administrator&gt;expdp parfile=c:\\etl\\expdp01.txt<br>Export: Release 10.2.0.3.0 - Production on 星期二, 13 8月, 2013 18:40:05<br>Copyright (c) 2003, 2005, Oracle. &nbsp;All rights reserved.<br><br>连接到: Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - Production<br>With the Partitioning, OLAP and Data Mining options<br>启动 &quot;ORABW&quot;.&quot;SYS_EXPORT_TABLE_01&quot;: &nbsp;parfile=c:\\etl\\expdp01.txt<br>正在使用 BLOCKS 方法进行估计...<br>处理对象类型 TABLE_EXPORT/TABLE/TABLE_DATA<br>使用 BLOCKS 方法的总估计: 0 KB<br>处理对象类型 TABLE_EXPORT/TABLE/TABLE<br>处理对象类型 TABLE_EXPORT/TABLE/INDEX/INDEX<br>处理对象类型 TABLE_EXPORT/TABLE/CONSTRAINT/CONSTRAINT<br>处理对象类型 TABLE_EXPORT/TABLE/INDEX/STATISTICS/INDEX_STATISTICS<br>处理对象类型 TABLE_EXPORT/TABLE/COMMENT<br>处理对象类型 TABLE_EXPORT/TABLE/STATISTICS/TABLE_STATISTICS<br>. . 导出了 &quot;ORABW&quot;.&quot;<span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">PRODUCTS</span>&quot; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 120 KB &nbsp; &nbsp; &nbsp; 80 行<br>已成功加载/卸载了主表 &quot;ORABW&quot;.&quot;SYS_EXPORT_TABLE_01&quot;<br>******************************************************************************<br>ORABW.SYS_EXPORT_TABLE_01 的转储文件集为:<br><span style="color:#ff6666">&nbsp; C:\\ETL\\EXPDAT.DMP</span><br>作业 &quot;ORABW&quot;.&quot;SYS_EXPORT_TABLE_01&quot; 已于 18:40:15 成功完成<br></p><p><br></p><p><span style="color:#3366ff">这样就把表<span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">PRODUCTS的信息导了出来，包括与该表所有有关的对象，具体信息参考上面信息；</span></span></p><p><span style="color:#3366ff">然后就可以把导出的包含该表信息的</span><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><span style="color:#ff6666">EXPDAT.DMP</span><span style="color:#3366ff">导入到相应的数据库中；</span></span></p>导入时也可以用一个<span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">parfile文件，也可以用导出的那个；例如：</span><p><span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">C:\\Documents and Settings\\Administrator&gt;impdp parfile=c:\\etl\\expdp01.txt<br>Import: Release 10.2.0.3.0 - Production on 星期二, 13 8月, 2013 19:07:40<br>Copyright (c) 2003, 2005, Oracle. &nbsp;All rights reserved.<br><br>连接到: Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - Production<br>With the Partitioning, OLAP and Data Mining options<br>已成功加载/卸载了主表 &quot;ORABW&quot;.&quot;SYS_IMPORT_TABLE_01&quot;<br>启动 &quot;ORABW&quot;.&quot;SYS_IMPORT_TABLE_01&quot;: &nbsp;parfile=c:\\etl\\expdp01.txt<br>处理对象类型 TABLE_EXPORT/TABLE/TABLE<br>处理对象类型 TABLE_EXPORT/TABLE/TABLE_DATA<br>. . 导入了 &quot;ORABW&quot;.&quot;<span style="font-family:Tahoma,sans-serif; font-size:12px; line-height:19px">PRODUCTS</span>&quot; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 120 KB &nbsp; &nbsp; &nbsp; 80 行<br>处理对象类型 TABLE_EXPORT/TABLE/INDEX/INDEX<br>处理对象类型 TABLE_EXPORT/TABLE/CONSTRAINT/CONSTRAINT<br>处理对象类型 TABLE_EXPORT/TABLE/INDEX/STATISTICS/INDEX_STATISTICS<br>处理对象类型 TABLE_EXPORT/TABLE/COMMENT<br>处理对象类型 TABLE_EXPORT/TABLE/STATISTICS/TABLE_STATISTICS<br>作业 &quot;ORABW&quot;.&quot;SYS_IMPORT_TABLE_01&quot; 已于 19:07:45 成功完成<br></span></p><p><br></p><p>Ok，到此告一段落。</p><p><br></p><p></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">-----------------------------------------------------------------------------------------------------------------------</p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; color:rgb(51,102,255)"><span style="color:red">博文所有内容均属原创，文章允许转载，但必须以链接方式注明源地址，否则追究法律责任</span><span style="color:red">!</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; color:rgb(51,102,255)"><span style="color:red">Blog:&nbsp;&nbsp;&nbsp;&nbsp;http://blog.csdn.net/perfect_db</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; color:rgb(51,102,255)"><span style="color:red">Email: &nbsp;&nbsp;</span><a target="_blank" target="_blank" href="mailto:tianlesoftware@gmail.com" style="color:rgb(202,0,0); text-decoration:none"><span style="color:red">p</span></a><span style="color:red">erfect_db@sina.com</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; color:rgb(51,102,255)"><span style="color:red">&nbsp; &nbsp;QQ: &nbsp; 787266309</span></p><div><span style="color:red"><br></span></div><br>            <div>                作者：xuelanggongwu 发表于2013-8-13 19:14:40 <a href="http://blog.csdn.net/perfect_db/article/details/9952861">原文链接</a>            </div>            <div>            阅读：142 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/9952861#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]ORA-12514 ,ORA-00119, ORA-00132]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9935601</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9935601</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-12 21:59:46</pubDate>
			
			<description><![CDATA[            <p>&nbsp;</p><p>今天使用pl/sql链接oracle的时候遇到点小麻烦，主要是对oracle的监听理解不透所致，在这里把遇到的问题记录一下，其实真正的原理的东西还有待研究</p><p>为了避免有个叫做什么“云朵网络”的网站恶意转摘，特加此博客说明，估计它们会屏蔽这个地址（<span style="font-family:Arial; font-size:14px; color:#ff00; line-height:26px">Blog:&nbsp;&nbsp;&nbsp;&nbsp;http://blog.csdn.net/perfect_db</span>）；</p><p><br></p><p>SQL&gt; <span style="color:#ff0000">select * from v$version;</span><br>BANNER<br>--------------------------------------------------------------------------------<br>Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production<br>PL/SQL Release 11.2.0.1.0 - Production<br>CORE &nbsp; &nbsp;11.2.0.1.0 &nbsp; &nbsp; &nbsp;Production<br>TNS for 32-bit Windows: Version 11.2.0.1.0 - Production<br>NLSRTL Version 11.2.0.1.0 - Production<br></p><p><br></p><p>用pl/sql链接数据库，出现了下列错误：</p><p><span style="color:#ff0000">正在连接...ORA-12514: TNS: 监听程序当前无法识别连接描述符中请求的服务；</span></p><p><span style="color:#3366ff">于是就用oracle的网络配置助手配置监听和tns</span></p><p><span style="color:#3366ff">因为之前我升级过数据库，从服务中也能看到有两个版本的监听服务，就感觉是这个原因，就一遍遍的尝试删除、创建监听，创建tns，结果弄的焦头烂额的也没有搞定；打算看看spfile里的变量设置，因为监听只是用在客户端链接的时候用，所以我在服务器端用sql*plus是可以链接上的，谁知当我链接上的时候发现数据库没有启动（低级错误），当数据库没有启动的时候用网络配置助手配置的时候就是会出现这个错误； &nbsp;于是就启动数据库，无奈，屋漏偏锋连阴雨，有出现了下列的错误：</span></p><p><span style="background-color:rgb(255,255,255)">SQL&gt;<span style="color:#ff6666"> startup</span><br>ORA-00119: invalid specification for system parameter LOCAL_LISTENER<br>ORA-00132: syntax error or unresolved network name 'LISTENER_ORCL'</span><br></p><p><span style="background-color:rgb(255,255,255)">看错误应该是跟监听有关的系统变量的设置出了问题；用下列方法解决：</span></p><p><span style="background-color:rgb(255,255,255)">SQL&gt; <span style="color:#ff6666">create pfile='c:\\pfile2.ora' from spfile;</span><br>文件已创建。<br></span></p><p><span style="background-color:rgb(255,255,255)">打开之后找到，变量<span style="color:#ff6666">&nbsp;*.local_listener='LISTENER_ORCL' &nbsp;</span></span></p><p><span style="background-color:rgb(255,255,255)">先干掉，然后保存该文件，用它先来启动；</span></p><p><span style="background-color:rgb(255,255,255)">SQL&gt; <span style="color:#ff6666">startup pfile='c:\\pfile2.ora';</span><br>ORACLE 例程已经启动。<br><br>Total System Global Area &nbsp;836976640 bytes<br>Fixed Size &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1377812 bytes<br>Variable Size &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 683674092 bytes<br>Database Buffers &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;146800640 bytes<br>Redo Buffers &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5124096 bytes<br>数据库装载完毕。<br>数据库已经打开。</span></p><p><span style="background-color:rgb(255,255,255)"><br></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff">看来是可以了，那么用此pfile 创建spfile；</span><br>SQL&gt; <span style="color:#ff6666">create spfile from pfile=‘c:\\pfile2.ora’;</span><br></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff">再次试验</span></span></p><p><span style="background-color:rgb(255,255,255)">SQL&gt; <span style="color:#ff6666">shutdown immediate;</span><br>数据库已经关闭。<br>已经卸载数据库。<br></span></p><p><span style="background-color:rgb(255,255,255)">SQL&gt; <span style="color:#ff6666">startup</span><br>ORACLE 例程已经启动。<br><br>Total System Global Area &nbsp;836976640 bytes<br>Fixed Size &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1377812 bytes<br>Variable Size &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 683674092 bytes<br>Database Buffers &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;146800640 bytes<br>Redo Buffers &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5124096 bytes<br>数据库装载完毕。<br>数据库已经打开。<br></span></p><p><span style="background-color:rgb(255,255,255)">查看那个变量的情况：</span></p><p><span style="background-color:rgb(255,255,255)">SQL&gt;<span style="color:#ff6666"> show parameter loc</span><br><br><br>NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TYPE &nbsp; &nbsp; &nbsp; &nbsp;VALUE<br>------------------------------------ ----------- ------------------------------<br>db_block_buffers &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; integer &nbsp; &nbsp; 0<br>db_block_checking &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;string &nbsp; &nbsp; &nbsp;FALSE<br>db_block_checksum &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;string &nbsp; &nbsp; &nbsp;TYPICAL<br>db_block_size &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;integer &nbsp; &nbsp; 8192<br>db_file_multiblock_read_count &nbsp; &nbsp; &nbsp; &nbsp;integer &nbsp; &nbsp; 16<br>ddl_lock_timeout &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; integer &nbsp; &nbsp; 0<br>distributed_lock_timeout &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; integer &nbsp; &nbsp; 60<br>dml_locks &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;integer &nbsp; &nbsp; 1088<br><span style="color:#ff6666">local_listener &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string</span><br>lock_name_space &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;string<br>lock_sga &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; boolean &nbsp; &nbsp; FALSE<br></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff">&#20540;为空，既然能够正常使用就先不去设置了；</span></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff"><br></span></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff"><span style="font-family:Arial; font-size:14px; color:#ff00; line-height:26px">Blog:&nbsp;&nbsp;&nbsp;&nbsp;http://blog.csdn.net/perfect_db</span><br></span></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff"><br></span></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff">官方文档对此变量的解释：</span></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff"></span></span></p><h1 class="sect1" style="border-bottom:rgb(221,221,221) 1px solid; width:910px; font-family:Tahoma,sans-serif; color:rgb(34,34,34); font-size:21px">LOCAL_LISTENER<a target="_blank" id="sthref324" name="sthref324" target="_blank"></a><a target="_blank" id="sthref325" name="sthref325" target="_blank"></a></h1><div class="inftblinformal" style="line-height:19px; font-family:Tahoma,sans-serif; max-width:70em; color:rgb(34,34,34); font-size:12px"><table dir="ltr" class="Informal" title="LOCAL_LISTENER initialization parameter" border="1" rules="groups" cellspacing="0" summary="This table is described in the preceding text" cellpadding="3" width="100%" frame="hsides" style="max-width:70em; font-size:12px"><colgroup><col width="25%"><col width="*"></colgroup><thead><tr valign="top" align="left"><th id="r1c1-t217" valign="bottom" align="left" style="vertical-align:bottom">Property</th><th id="r1c2-t217" valign="bottom" align="left" style="vertical-align:bottom">Description</th></tr></thead><tbody><tr valign="top" align="left"><td id="r2c1-t217" headers="r1c1-t217" align="left" style="vertical-align:top"><span class="bold" style="font-weight:bold">Parameter type</span></td><td headers="r2c1-t217 r1c2-t217" align="left" style="vertical-align:top">String</td></tr><tr valign="top" align="left"><td id="r3c1-t217" headers="r1c1-t217" align="left" style="vertical-align:top"><span class="bold" style="font-weight:bold">Syntax</span></td><td headers="r3c1-t217 r1c2-t217" align="left" style="vertical-align:top"><code>LOCAL_LISTENER =</code>&nbsp;<code><span class="codeinlineitalic" style="font-style:italic">network_name</span></code></td></tr><tr valign="top" align="left"><td id="r4c1-t217" headers="r1c1-t217" align="left" style="vertical-align:top"><span class="bold" style="font-weight:bold">Default value</span></td><td headers="r4c1-t217 r1c2-t217" align="left" style="vertical-align:top"><code>(ADDRESS = (PROTOCOL=TCP)(HOST=</code><code><span class="codeinlineitalic" style="font-style:italic">hostname</span></code><code>)(PORT=1521))</code>&nbsp;where&nbsp;<code><span class="codeinlineitalic" style="font-style:italic">hostname</span></code>&nbsp;is the network name of the local host.</td></tr><tr valign="top" align="left"><td id="r5c1-t217" headers="r1c1-t217" align="left" style="vertical-align:top"><span class="bold" style="font-weight:bold">Modifiable</span></td><td headers="r5c1-t217 r1c2-t217" align="left" style="vertical-align:top"><code>ALTER SYSTEM</code></td></tr><tr valign="top" align="left"><td id="r6c1-t217" headers="r1c1-t217" align="left" style="vertical-align:top"><span class="bold" style="font-weight:bold">Basic</span></td><td headers="r6c1-t217 r1c2-t217" align="left" style="vertical-align:top">No</td></tr></tbody></table><br></div><p></p><p style="line-height:19px; font-family:Tahoma,sans-serif; max-width:70em; color:rgb(34,34,34); font-size:12px"><code style="font-size:12px">LOCAL_LISTENER</code>&nbsp;specifies a network name that resolves to an address or address list of Oracle Net local listeners (that is, listeners that are running on the same machine as this instance). The address or address list is specified in the&nbsp;<code style="font-size:12px">TNSNAMES.ORA</code>&nbsp;file or other address repository as configured for your system.</p><br><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff">最后在说一下那个<span style="color:#ff00">ORA-12514错误</span>，由于数据库的启动也自动解决了，呵呵<span style="color:#ff00">；</span></span></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff"><span style="color:#ff00"><br></span></span></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff"><span style="color:#ff00"></span></span></span></p><p style="padding-bottom:0px; line-height:26px; margin-top:0px; font-family:Arial; margin-bottom:0px; font-size:14px; padding-top:0px">-----------------------------------------------------------------------------------------------------------------------</p><p style="padding-bottom:0px; line-height:26px; margin-top:0px; font-family:Arial; margin-bottom:0px; color:rgb(51,102,255); font-size:14px; padding-top:0px"><span style="color:red">博文所有内容均属原创，文章允许转载，但必须以链接方式注明源地址，否则追究法律责任</span><span style="color:red">!</span></p><p style="padding-bottom:0px; line-height:26px; margin-top:0px; font-family:Arial; margin-bottom:0px; color:rgb(51,102,255); font-size:14px; padding-top:0px"><span style="color:red">Blog:&nbsp;&nbsp;&nbsp;&nbsp;http://blog.csdn.net/perfect_db</span></p><p style="padding-bottom:0px; line-height:26px; margin-top:0px; font-family:Arial; margin-bottom:0px; color:rgb(51,102,255); font-size:14px; padding-top:0px"><span style="color:red">Email: &nbsp;&nbsp;</span><a target="_blank" href="mailto:tianlesoftware@gmail.com" target="_blank" style="color:rgb(202,0,0); text-decoration:none"><span style="color:red">p</span></a><span style="color:red">erfect_db@sina.com</span></p><p style="padding-bottom:0px; line-height:26px; margin-top:0px; font-family:Arial; margin-bottom:0px; color:rgb(51,102,255); font-size:14px; padding-top:0px"><span style="color:red">&nbsp; &nbsp;QQ: &nbsp; 787266309</span></p><br>            <div>                作者：xuelanggongwu 发表于2013-8-12 21:59:46 <a href="http://blog.csdn.net/perfect_db/article/details/9935601">原文链接</a>            </div>            <div>            阅读：130 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/9935601#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[转]PL/SQL 异常错误处理机制]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9922433</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9922433</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-12 12:52:24</pubDate>
			
			<description><![CDATA[            <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;摘自：<a target="_blank" href="http://www.cnblogs.com/huyong/archive/2011/05/06/2038743.html">http://www.cnblogs.com/huyong/archive/2011/05/06/2038743.html</a></p><p class="p0" style="margin:7.5pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; color:rgb(0,0,0); font-size:11pt; line-height:1.8em; font-family:宋体"><strong></strong></span></p><p class="p0" style="margin:7.5pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; color:rgb(0,0,0); font-size:11pt; line-height:1.8em; font-family:宋体; background-color:rgb(255,255,0)"><strong>本篇主要内容如下：</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:'Times New Roman'"></span></p><p class="p16" style="margin:0pt auto 0pt 10.5pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-variant:small-caps; font-family:'Times New Roman'">5.1&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">异常处理概念</span></span><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-variant:small-caps; font-family:'Times New Roman'"></span></p><p class="p17" style="margin:0pt auto 0pt 21pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-family:'Times New Roman'">5.1.1&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">预定义的异常处理</span></span><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-family:'Times New Roman'"></span></p><p class="p17" style="margin:0pt auto 0pt 21pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-family:'Times New Roman'">5.1.2&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">非预定义的异常处理</span></span><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-family:'Times New Roman'"></span></p><p class="p17" style="margin:0pt auto 0pt 21pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-family:'Times New Roman'">5.1.3&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">用户自定义的异常处理</span></span><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-family:'Times New Roman'"></span></p><p class="p17" style="margin:0pt auto 0pt 21pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-family:'Times New Roman'">5.1.4&nbsp;&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">用户定义的异常处理</span></span><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-family:'Times New Roman'"></span></p><p class="p16" style="margin:0pt auto 0pt 10.5pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-variant:small-caps; font-family:'Times New Roman'">5.2&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">异常错误传播</span></span><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-variant:small-caps; font-family:'Times New Roman'"></span></p><p class="p17" style="margin:0pt auto 0pt 21pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-family:'Times New Roman'">5.2.1&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">在执行部分引发异常错误</span></span><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-family:'Times New Roman'"></span></p><p class="p17" style="margin:0pt auto 0pt 21pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-family:'Times New Roman'">5.2.2&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">在声明部分引发异常错误</span></span><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-family:'Times New Roman'"></span></p><p class="p16" style="margin:0pt auto 0pt 10.5pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-variant:small-caps; font-family:'Times New Roman'">5.3&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">异常错误处理编程</span></span><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-variant:small-caps; font-family:'Times New Roman'"></span></p><p class="p16" style="margin:0pt auto 0pt 10.5pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-variant:small-caps; font-family:'Times New Roman'">5.4&nbsp;&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">在&nbsp;</span><span style="font-family:Times New Roman; margin:0px; padding:0px">PL/SQL&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">中使用&nbsp;</span><span style="font-family:Times New Roman; margin:0px; padding:0px">SQLCODE,&nbsp;SQLERRM</span></span><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-variant:small-caps; font-family:宋体">异常处理函数</span></p><p class="p16" style="margin:0pt auto 0pt 10.5pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-variant:small-caps; font-family:宋体"></span><span style="margin:0px; padding:0px; font-size:10pt; line-height:1.8em; font-variant:small-caps; font-family:'Times New Roman'"></span></p><hr style="margin:0px; padding:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><p style="margin:10px auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:'Times New Roman'"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:'Times New Roman'"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">&nbsp;</span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">&nbsp;即使是写得最好的</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">PL/SQL<span style="font-family:宋体; margin:0px; padding:0px">程序也会遇到错误或未预料到的事件</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">。</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">一个优秀的程序都应该能够正确处理各种出错情况，并尽可能从错误中恢复。</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">任何</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">ORACLE<span style="font-family:宋体; margin:0px; padding:0px">错误（报告为</span><span style="font-family:Arial; margin:0px; padding:0px">ORA-xxxxx</span><span style="font-family:宋体; margin:0px; padding:0px">形式的</span><span style="font-family:Arial; margin:0px; padding:0px">Oracle</span><span style="font-family:宋体; margin:0px; padding:0px">错误号）、</span><span style="font-family:Arial; margin:0px; padding:0px">PL/SQL</span><span style="font-family:宋体; margin:0px; padding:0px">运行错误或用户定义条件（不一写是错误），都可以。当然了，</span><span style="font-family:Arial; margin:0px; padding:0px">PL/SQL</span><span style="font-family:宋体; margin:0px; padding:0px">编译错误不能通过</span><span style="font-family:Arial; margin:0px; padding:0px">PL/SQL</span><span style="font-family:宋体; margin:0px; padding:0px">异常处理来处理，因为这些错误发生在</span><span style="font-family:Arial; margin:0px; padding:0px">PL/SQL</span><span style="font-family:宋体; margin:0px; padding:0px">程序执行之前。</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORACLE&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">提供异常情况</span><span style="font-family:Arial; margin:0px; padding:0px">(EXCEPTION)</span><span style="font-family:宋体; margin:0px; padding:0px">和异常处理</span><span style="font-family:Arial; margin:0px; padding:0px">(EXCEPTION&nbsp;HANDLER)</span><span style="font-family:宋体; margin:0px; padding:0px">来实现错误处理。</span></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span>&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:Arial"><strong><a target="_blank" name="_Toc17364" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204)">5.1&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">异常处理概念</span></a></strong></span><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">异常情况处理<span style="font-family:Arial; margin:0px; padding:0px">(EXCEPTION)</span><span style="font-family:宋体; margin:0px; padding:0px">是用来处理正常执行过程中未预料的事件</span><span style="font-family:Arial; margin:0px; padding:0px">,</span><span style="font-family:宋体; margin:0px; padding:0px">程序块的异常处理预定义的错误和自定义错误</span><span style="font-family:Arial; margin:0px; padding:0px">,</span><span style="font-family:宋体; margin:0px; padding:0px">由于</span><span style="font-family:Arial; margin:0px; padding:0px">PL/SQL</span><span style="font-family:宋体; margin:0px; padding:0px">程序块一旦产生异常而没有指出如何处理时</span><span style="font-family:Arial; margin:0px; padding:0px">,</span><span style="font-family:宋体; margin:0px; padding:0px">程序就会自动终止整个程序运行</span><span style="font-family:Arial; margin:0px; padding:0px">.</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">有三种类型的异常错误：</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; text-indent:-18pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">&nbsp;&nbsp;&nbsp; 1．&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">预定义&nbsp;<span style="font-family:Arial; margin:0px; padding:0px">(&nbsp;Predefined&nbsp;)</span><span style="font-family:宋体; margin:0px; padding:0px">错误</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp;ORACLE<span style="font-family:宋体; margin:0px; padding:0px">预定义的异常情况大约有</span><span style="font-family:Arial; margin:0px; padding:0px">24</span><span style="font-family:宋体; margin:0px; padding:0px">个。对这种异常情况的处理，无需在程序中定义，由</span><span style="font-family:Arial; margin:0px; padding:0px">ORACLE</span><span style="font-family:宋体; margin:0px; padding:0px">自动将其引发。</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; text-indent:-18pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">&nbsp;&nbsp;&nbsp; 2．&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">非预定义&nbsp;<span style="font-family:Arial; margin:0px; padding:0px">(&nbsp;Predefined&nbsp;)</span><span style="font-family:宋体; margin:0px; padding:0px">错误</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp; 即其他标准的<span style="font-family:Arial; margin:0px; padding:0px">ORACLE</span><span style="font-family:宋体; margin:0px; padding:0px">错误。对这种异常情况的处理，需要用户在程序中定义，然后由</span><span style="font-family:Arial; margin:0px; padding:0px">ORACLE</span><span style="font-family:宋体; margin:0px; padding:0px">自动将其引发。</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; text-indent:-18pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">&nbsp;&nbsp;&nbsp; 3．&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">用户定义<span style="font-family:Arial; margin:0px; padding:0px">(User_define)&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">错误</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;程序执行过程中，出现编程人员认为的非正常情况。对这种异常情况的处理，需要用户在程序中定义，然后显式地在程序中将其引发。</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">异常处理部分一般放在&nbsp;<span style="font-family:Arial; margin:0px; padding:0px">PL/SQL&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">程序体的后半部</span><span style="font-family:Arial; margin:0px; padding:0px">,</span><span style="font-family:宋体; margin:0px; padding:0px">结构为</span><span style="font-family:Arial; margin:0px; padding:0px">:</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; color:rgb(0,0,128); font-size:10.5pt; line-height:1.8em; font-family:'Courier New'"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;</span></p><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto; color:rgb(17,17,17)"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">EXCEPTION<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;first_exception&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&lt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">code&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">to</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;handle&nbsp;first&nbsp;exception&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&gt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;second_exception&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&lt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">code&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">to</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;handle&nbsp;second&nbsp;exception&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&gt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;OTHERS&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&lt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">code&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">to</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;handle&nbsp;others&nbsp;exception&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&gt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">异常处理可以按任意次序排列<span style="font-family:Arial; margin:0px; padding:0px">,</span><span style="font-family:宋体; margin:0px; padding:0px">但&nbsp;</span><span style="font-family:Arial; margin:0px; padding:0px">OTHERS&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">必须放在最后</span><span style="font-family:Arial; margin:0px; padding:0px">.</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><h3 style="margin:0pt 0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif"><span style="margin:0px; padding:0px; color:rgb(17,17,17); font-size:10.5pt; line-height:1.8em; font-family:Arial"><a target="_blank" name="_Toc6798" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204)">5.1.1&nbsp;</a>预定义的异常处理</span><span style="margin:0px; padding:0px; color:rgb(17,17,17); font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></h3><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp; 预定义说明的部分&nbsp;<span style="font-family:Arial; margin:0px; padding:0px">ORACLE&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">异常错误</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><table style="margin:0px 0px 0px 14.4pt; padding:0pt 5.4pt; border:1px solid rgb(192,192,192); border-collapse:collapse; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><tbody style="margin:0px; padding:0px"><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border:0.5pt solid rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-align:center"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">错误号</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:0.5pt 0.5pt 0.5pt medium; border-style:solid solid solid none; border-top-color:rgb(0,0,0); border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-align:center"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">异常错误信息名称</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:0.5pt 0.5pt 0.5pt medium; border-style:solid solid solid none; border-top-color:rgb(0,0,0); border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-align:center"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">说明</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-0001</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Dup_val_on_index</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">违反了唯一性限制</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-0051</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Timeout-on-resource</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">在等待资源时发生超时</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-0061</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Transaction-backed-out</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">由于发生死锁事务被撤消</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-1001</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Invalid-CURSOR</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">试图使用一个无效的游标</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-1012</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Not-logged-on</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">没有连接到<span style="font-family:Arial; margin:0px; padding:0px">ORACLE</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-1017</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Login-denied</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">无效的用户名<span style="font-family:Arial; margin:0px; padding:0px">/</span><span style="font-family:宋体; margin:0px; padding:0px">口令</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-1403</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">No_data_found</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">SELECT&nbsp;INTO<span style="font-family:宋体; margin:0px; padding:0px">没有找到数据</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-1422</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Too_many_rows</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">SELECT&nbsp;INTO&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">返回多行</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-1476</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Zero-divide</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">试图被零除</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-1722</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Invalid-NUMBER</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">转换一个数字失败</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-6500</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Storage-error</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">内存不够引发的内部错误</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-6501</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Program-error</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">内部错误</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-6502</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Value-error</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">转换或截断错误</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-6504</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Rowtype-mismatch</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">宿主</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">游标变量与&nbsp;<span style="font-family:Arial; margin:0px; padding:0px">PL/SQL</span><span style="font-family:宋体; margin:0px; padding:0px">变量有不兼容行类型</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-6511</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">CURSOR-already-OPEN</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">试图打开一个已</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">处于打开状态</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">的游标</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-6530</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Access-INTO-null</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">试图为<span style="font-family:Arial; margin:0px; padding:0px">null&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">对象的属性赋&#20540;</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-6531</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Collection-is-null</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">试图将<span style="font-family:Arial; margin:0px; padding:0px">Exists&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">以外的集合</span><span style="font-family:Arial; margin:0px; padding:0px">(&nbsp;collection)</span><span style="font-family:宋体; margin:0px; padding:0px">方法应用于一个</span><span style="font-family:Arial; margin:0px; padding:0px">null&nbsp;pl/sql&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">表上或</span><span style="font-family:Arial; margin:0px; padding:0px">varray</span><span style="font-family:宋体; margin:0px; padding:0px">上</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-6532</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Subscript-outside-limit</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">对嵌套或<span style="font-family:Arial; margin:0px; padding:0px">varray</span><span style="font-family:宋体; margin:0px; padding:0px">索引得引用超出声明范围以外</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td></tr><tr style="margin:0px; padding:0px"><td valign="top" width="108" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt; border-style:none solid solid; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-left-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:81pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">ORA-6533</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="184" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:138.6pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">Subscript-beyond-count</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td><td valign="top" width="312" style="margin:0px; padding:0pt 5.4pt; border-width:medium 0.5pt 0.5pt medium; border-style:none solid solid none; border-right-color:rgb(0,0,0); border-bottom-color:rgb(0,0,0); border-collapse:collapse; word-break:normal!important; width:234pt"><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">对嵌套或<span style="font-family:Arial; margin:0px; padding:0px">varray&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">索引得引用大于集合中元素的个数</span><span style="font-family:Arial; margin:0px; padding:0px">.</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p></td></tr></tbody></table><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21.25pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">对这种异常情况的处理，只需在<span style="font-family:Arial; margin:0px; padding:0px">PL/SQL</span><span style="font-family:宋体; margin:0px; padding:0px">块的异常处理部分，直接引用相应的异常情况名，并对其完成相应的异常错误处理即可。</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>例<span style="font-family:Arial; margin:0px; padding:0px">1</span><span style="font-family:宋体; margin:0px; padding:0px">：</span></strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">更新指定员工工资，如工资小于<span style="font-family:Arial; margin:0px; padding:0px">1500</span><span style="font-family:宋体; margin:0px; padding:0px">，则加</span><span style="font-family:Arial; margin:0px; padding:0px">100</span><span style="font-family:宋体; margin:0px; padding:0px">；</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; color:rgb(0,0,128); font-size:10.5pt; line-height:1.8em; font-family:'Courier New'"></span></p><h3 style="margin:0pt 0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif"><span style="margin:0px; padding:0px; color:rgb(17,17,17); font-size:10.5pt; line-height:1.8em; font-family:Arial"></span>&nbsp;<div class="cnblogs_code" style="margin:20px 0px 5px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto"><div class="cnblogs_code_toolbar" style="margin:20px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; font-size:12px; color:rgb(17,17,17); line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:20px 0px 0px; padding:0px"><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">DECLARE</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;v_empno&nbsp;employees.employee_id</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">%</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">TYPE&nbsp;:</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">&amp;</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">empno;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;v_sal&nbsp;&nbsp;&nbsp;employees.salary</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">%</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">TYPE;<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">SELECT</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;salary&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">INTO</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;v_sal&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">FROM</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;employees&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">WHERE</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;employee_id&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;v_empno;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">IF</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;v_sal</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">&lt;=</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,0,0); line-height:1.5">1500</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">UPDATE</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;employees&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">SET</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;salary&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;salary&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">&#43;</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,0,0); line-height:1.5">100</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">WHERE</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;employee_id</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">v_empno;&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">编码为</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">v_empno</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">员工工资已更新!</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">ELSE</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">编码为</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">v_empno</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">员工工资已经超过规定&#20540;!</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">IF</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">;<br style="margin:0px; padding:0px">EXCEPTION<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;NO_DATA_FOUND&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">数据库中没有编码为</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">v_empno</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">的员工</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;TOO_MANY_ROWS&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">程序运行错误!请使用游标</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">&nbsp;OTHERS&nbsp;</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(SQLCODE</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">---</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">SQLERRM);<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; font-size:12px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; font-size:12px; line-height:1.5">;&nbsp;</span></div><div class="cnblogs_code_toolbar" style="margin:20px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; font-size:12px; color:rgb(17,17,17); line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div></h3><h3 style="margin:0pt 0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif"><span style="margin:0px; padding:0px; color:rgb(17,17,17); font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;<a target="_blank" name="_Toc10298" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204)">5.1.2&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">非预定义的异常处理</span></a></span><span style="margin:0px; padding:0px; color:rgb(17,17,17); font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></h3><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21.25pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">对于这类异常情况的处理，首先必须对非定义的<span style="font-family:Arial; margin:0px; padding:0px">ORACLE</span><span style="font-family:宋体; margin:0px; padding:0px">错误进行定义。步骤如下：</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 21.25pt; padding-top:0px; padding-bottom:0px; text-indent:-21.25pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">1.&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">在<span style="font-family:Arial; margin:0px; padding:0px">PL/SQL&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">块的定义部分定义异常情况：</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 21.25pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; color:rgb(0,0,128); font-size:10.5pt; line-height:1.8em; font-family:'Courier New'"></span></p><p class="p0" style="margin:0pt auto 0pt 21.25pt; padding-top:0px; padding-bottom:0px; text-indent:-21.25pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;</span></p><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto; color:rgb(17,17,17)"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&lt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">异常情况</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&gt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;&nbsp;EXCEPTION;</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto 0pt 21.25pt; padding-top:0px; padding-bottom:0px; text-indent:-21.25pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;</p><p class="p0" style="margin:0pt auto 0pt 21.25pt; padding-top:0px; padding-bottom:0px; text-indent:-21.25pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">2.&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">将其定义好的异常情况，与标准的<span style="font-family:Arial; margin:0px; padding:0px">ORACLE</span><span style="font-family:宋体; margin:0px; padding:0px">错误联系起来，使用</span><span style="font-family:Arial; margin:0px; padding:0px">EXCEPTION_INIT</span><span style="font-family:宋体; margin:0px; padding:0px">语句：</span></span></p><span style="font-family:宋体; margin:0px; padding:0px; color:rgb(17,17,17); font-size:13px; line-height:23px"></span><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; font-size:12px; border:1px solid rgb(204,204,204); overflow:auto"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">PRAGMA&nbsp;EXCEPTION_INIT(</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&lt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">异常情况</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&gt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&lt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">错误代码</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&gt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto 0pt 21.25pt; padding-top:0px; padding-bottom:0px; text-indent:-21.25pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="font-family:宋体; margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span>&nbsp;</p><span style="color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"></span><p class="p0" style="margin:0pt auto 0pt 21.25pt; padding-top:0px; padding-bottom:0px; text-indent:-21.25pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">3.&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">在<span style="font-family:Arial; margin:0px; padding:0px">PL/SQL&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">块的异常情况处理部分对异常情况做出相应的处理。</span></span></p><p class="p0" style="margin:0pt auto 0pt 21.25pt; padding-top:0px; padding-bottom:0px; text-indent:-21.25pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><span style="font-family:宋体; margin:0px; padding:0px"></span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span>&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>例<span style="font-family:Arial; margin:0px; padding:0px">2</span><span style="font-family:宋体; margin:0px; padding:0px">：</span></strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">删除指定部门的记录信息，以确保该部门没有员工。</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>&nbsp;</strong></span></p><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto; color:rgb(17,17,17)"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INSERT</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INTO</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;departments&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">VALUES</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>50</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">FINANCE</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">CHICAGO</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px"><br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">DECLARE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;v_deptno&nbsp;departments.department_id</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">%</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">TYPE&nbsp;:</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&amp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">deptno;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;deptno_remaining&nbsp;EXCEPTION;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;PRAGMA&nbsp;EXCEPTION_INIT(deptno_remaining,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">-</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>2292</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5">/*</span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5">&nbsp;-2292&nbsp;是违反一致性约束的错误代码&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5">*/</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">DELETE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">FROM</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;departments&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHERE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;department_id&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;v_deptno;<br style="margin:0px; padding:0px">EXCEPTION<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;deptno_remaining&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">违反数据完整性约束!</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;OTHERS&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(SQLCODE</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">---</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">SQLERRM);<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span>&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong><a target="_blank" name="_Toc2011" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204)">5.1.3&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">用户自定义的异常</span></a>处理</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">当与一个异常错误相关的错误出现时，就会隐含触发该异常错误。用户定义的异常错误是通过显式使用&nbsp;<span style="font-family:Arial; margin:0px; padding:0px">RAISE&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">语句来触发。当引发一个异常错误时，控制就转向到&nbsp;</span><span style="font-family:Arial; margin:0px; padding:0px">EXCEPTION</span><span style="font-family:宋体; margin:0px; padding:0px">块异常错误部分，执行错误处理代码。</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">对于这类异常情况的处理，步骤如下：</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; text-indent:-18pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">1．&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">在<span style="font-family:Arial; margin:0px; padding:0px">PL/SQL&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">块的定义部分定义异常情况：</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 21.25pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; color:rgb(0,0,128); font-size:10.5pt; line-height:1.8em; font-family:'Courier New'"></span></p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; text-indent:-18pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">&nbsp;</span></p><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto; color:rgb(17,17,17)"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&lt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">异常情况</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&gt;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;&nbsp;EXCEPTION;</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; text-indent:-18pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;</p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; text-indent:-18pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">2．&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">RAISE&nbsp;&lt;<span style="font-family:宋体; margin:0px; padding:0px">异常情况</span><span style="font-family:Arial; margin:0px; padding:0px">&gt;</span><span style="font-family:宋体; margin:0px; padding:0px">；</span></span></p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; text-indent:-18pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><span style="font-family:宋体; margin:0px; padding:0px"></span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span>&nbsp;</p><p class="p0" style="margin:0pt auto 0pt 21.25pt; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; text-indent:-18pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">3．&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">在<span style="font-family:Arial; margin:0px; padding:0px">PL/SQL&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">块的异常情况处理部分对异常情况做出相应的处理。</span></span></p><p class="p0" style="margin:0pt auto 0pt 18pt; padding-top:0px; padding-bottom:0px; text-indent:-18pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><span style="font-family:宋体; margin:0px; padding:0px"></span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span>&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>例<span style="font-family:Arial; margin:0px; padding:0px">3</span><span style="font-family:宋体; margin:0px; padding:0px">：</span></strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">更新指定员工工资，增加<span style="font-family:Arial; margin:0px; padding:0px">100</span><span style="font-family:宋体; margin:0px; padding:0px">；</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>&nbsp;</strong></span></p><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto; color:rgb(17,17,17)"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">DECLARE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;v_empno&nbsp;employees.employee_id</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">%</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">TYPE&nbsp;:</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=&amp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">empno;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;no_result&nbsp;&nbsp;EXCEPTION;<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">UPDATE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;employees&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">SET</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;salary&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;salary</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&#43;</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>100</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHERE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;employee_id&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;v_empno;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">IF</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;SQL</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">%</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">NOTFOUND&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RAISE&nbsp;no_result;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">IF</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;<br style="margin:0px; padding:0px">EXCEPTION<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;no_result&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">你的数据更新语句失败了!</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;OTHERS&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(SQLCODE</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">---</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">SQLERRM);<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span>&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong><a target="_blank" name="_Toc21632" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204)">5.1.4&nbsp;&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">用</span></a>户定义的异常处理</strong></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">调用<span style="font-family:Arial; margin:0px; padding:0px">DBMS_STANDARD(ORACLE</span><span style="font-family:宋体; margin:0px; padding:0px">提供的包</span><span style="font-family:Arial; margin:0px; padding:0px">)</span><span style="font-family:宋体; margin:0px; padding:0px">包所定义的</span><span style="font-family:Arial; margin:0px; padding:0px">RAISE_APPLICATION_ERROR</span><span style="font-family:宋体; margin:0px; padding:0px">过程，可以重新定义异常错误消息，它为应用程序提供了一种与</span><span style="font-family:Arial; margin:0px; padding:0px">ORACLE</span><span style="font-family:宋体; margin:0px; padding:0px">交互的方法。</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">RAISE_APPLICATION_ERROR&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">的语法如下：</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;</span></p><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto; color:rgb(17,17,17)"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;&nbsp;&nbsp;&nbsp;RAISE_APPLICATION_ERROR(error_number,error_message,</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">[</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">keep_errors</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">]</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;);</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp;&nbsp; 这里的<span style="font-family:Arial; margin:0px; padding:0px">error_number&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">是从&nbsp;</span><span style="font-family:Arial; margin:0px; padding:0px">–20,000&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">到&nbsp;</span><span style="font-family:Arial; margin:0px; padding:0px">–20,999&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">之间的参数，</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp;&nbsp;&nbsp;error_message&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">是相应的提示信息</span><span style="font-family:Arial; margin:0px; padding:0px">(&lt;&nbsp;2048&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">字节</span><span style="font-family:Arial; margin:0px; padding:0px">)</span><span style="font-family:宋体; margin:0px; padding:0px">，</span></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><span style="font-family:宋体; margin:0px; padding:0px">&nbsp;&nbsp;</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">keep_errors&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">为可选，如果</span><span style="font-family:Arial; margin:0px; padding:0px">keep_errors&nbsp;=TRUE&nbsp;,</span><span style="font-family:宋体; margin:0px; padding:0px">则新错误将被添加到已经引发的错误列表中。如果</span><span style="font-family:Arial; margin:0px; padding:0px">keep_errors=FALSE(</span><span style="font-family:宋体; margin:0px; padding:0px">缺省</span><span style="font-family:Arial; margin:0px; padding:0px">),</span><span style="font-family:宋体; margin:0px; padding:0px">则新错误将替换当前的错误列表。</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>例<span style="font-family:Arial; margin:0px; padding:0px">4</span><span style="font-family:宋体; margin:0px; padding:0px">：</span></strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">创建一个函数<span style="font-family:Arial; margin:0px; padding:0px">get_salary,&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">该函数检索指定部门的工资总和，其中定义了</span><span style="font-family:Arial; margin:0px; padding:0px">-20991</span><span style="font-family:宋体; margin:0px; padding:0px">和</span><span style="font-family:Arial; margin:0px; padding:0px">-20992</span><span style="font-family:宋体; margin:0px; padding:0px">号错误，分别处理参数为空和非法部门代码两种错误：</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>&nbsp;</strong></span></p><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto; color:rgb(17,17,17)"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">CREATE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">TABLE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;errlog(<br style="margin:0px; padding:0px">&nbsp;&nbsp;Errcode&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">NUMBER</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,<br style="margin:0px; padding:0px">&nbsp;&nbsp;Errtext&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">CHAR</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>40</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">));<br style="margin:0px; padding:0px"><br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">CREATE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">OR</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(255,0,255); line-height:1.5">REPLACE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">FUNCTION</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;get_salary(p_deptno&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">NUMBER</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">)<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">RETURN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">NUMBER</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">AS</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;v_sal&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">NUMBER</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">IF</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;p_deptno&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">IS</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">NULL</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;RAISE_APPLICATION_ERROR(</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">-</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>20991</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,&nbsp;’部门代码为空’);<br style="margin:0px; padding:0px">&nbsp;&nbsp;ELSIF&nbsp;p_deptno</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">&lt;</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>0</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;RAISE_APPLICATION_ERROR(</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">-</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>20992</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,&nbsp;’无效的部门代码’);<br style="margin:0px; padding:0px">&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">ELSE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">SELECT</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(255,0,255); line-height:1.5">SUM</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(employees.salary)&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INTO</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;v_sal&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">FROM</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;employees&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHERE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;employees.department_id</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">p_deptno;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">RETURN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;v_sal;<br style="margin:0px; padding:0px">&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">IF</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;<br style="margin:0px; padding:0px"><br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">DECLARE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;V_salary&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">NUMBER</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>7</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>2</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;V_sqlcode&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">NUMBER</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;<br style="margin:0px; padding:0px">&nbsp;&nbsp;V_sqlerr&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">VARCHAR2</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>512</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;Null_deptno&nbsp;EXCEPTION;<br style="margin:0px; padding:0px">&nbsp;&nbsp;Invalid_deptno&nbsp;EXCEPTION;<br style="margin:0px; padding:0px">&nbsp;&nbsp;PRAGMA&nbsp;EXCEPTION_INIT(null_deptno,</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">-</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>20991</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;PRAGMA&nbsp;EXCEPTION_INIT(invalid_deptno,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">-</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>20992</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;V_salary&nbsp;:</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">get_salary(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>10</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">10号部门工资：</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;TO_CHAR(V_salary));<br style="margin:0px; padding:0px"><br style="margin:0px; padding:0px">&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;V_salary&nbsp;:</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">get_salary(</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">-</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>10</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;EXCEPTION<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;invalid_deptno&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;V_sqlcode&nbsp;:</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">SQLCODE;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;V_sqlerr&nbsp;&nbsp;:</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">SQLERRM;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INSERT</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INTO</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;errlog(errcode,&nbsp;errtext)&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">VALUES</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(v_sqlcode,&nbsp;v_sqlerr);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">COMMIT</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;<br style="margin:0px; padding:0px">&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;inner1;<br style="margin:0px; padding:0px"><br style="margin:0px; padding:0px">&nbsp;&nbsp;V_salary&nbsp;:</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">get_salary(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>20</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">部门号为20的工资为：</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">TO_CHAR(V_salary));<br style="margin:0px; padding:0px"><br style="margin:0px; padding:0px">&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;V_salary&nbsp;:</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">get_salary(</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">NULL</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;inner2;<br style="margin:0px; padding:0px"><br style="margin:0px; padding:0px">&nbsp;&nbsp;V_salary&nbsp;:</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;get_salary(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>30</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">部门号为30的工资为：</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">TO_CHAR(V_salary));<br style="margin:0px; padding:0px"><br style="margin:0px; padding:0px">&nbsp;&nbsp;EXCEPTION<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;null_deptno&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;V_sqlcode&nbsp;:</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">SQLCODE;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;V_sqlerr&nbsp;&nbsp;:</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">SQLERRM;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INSERT</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INTO</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;errlog(errcode,&nbsp;errtext)&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">VALUES</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(v_sqlcode,&nbsp;v_sqlerr);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">COMMIT</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;OTHERS&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(SQLCODE</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">---</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">SQLERRM);<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">outer</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span>&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>例</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体"><strong>5</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>：</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">定义触发器，使用</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">RAISE_APPLICATION_ERROR<span style="font-family:宋体; margin:0px; padding:0px">阻止没有员工姓名的新员式记录插入</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">：</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:Arial"><strong>&nbsp;</strong></span></p><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto; color:rgb(17,17,17)"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">CREATE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">OR</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(255,0,255); line-height:1.5">REPLACE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">TRIGGER</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;tr_insert_emp<br style="margin:0px; padding:0px">BEFORE&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INSERT</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">ON</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;employees<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">FOR</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;EACH&nbsp;ROW<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">IF</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;:new.first_name&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">IS</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">NULL</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">OR</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;:new.last_name&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">is</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">null</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;RAISE_APPLICATION_ERROR(</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">-</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>20000</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">Employee&nbsp;must&nbsp;have&nbsp;a&nbsp;name.</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">IF</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:Arial"><strong></strong></span>&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:Arial"><strong><a target="_blank" name="_Toc23464" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204)">5.2&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">异常错误传播</span></a></strong></span><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp;&nbsp;&nbsp;由于异常错误可以在声明部分和执行部分以及异常错误部分出现，因而在不同部分引发的异常错误也不一样。</span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span>&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p><h3 style="margin:0pt 0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif"><span style="margin:0px; padding:0px; color:rgb(17,17,17); font-size:10.5pt; line-height:1.8em; font-family:Arial"><a target="_blank" name="_Toc12249" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204)">5.2.1&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">在执行部分引发异常错误</span></a></span><span style="margin:0px; padding:0px; color:rgb(17,17,17); font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></h3><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp;&nbsp;&nbsp;当一个异常错误在执行部分引发时，有下列情况：</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 21.25pt; padding-top:0px; padding-bottom:0px; text-indent:-21.25pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Wingdings">l&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">如果当前块对该异常错误设置了处理，则执行它并成功完成该块的执行，然后控制转给包含块。</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto 0pt 21pt; padding-top:0px; padding-bottom:0px; text-indent:-21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Wingdings">l&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">如果没有对当前块异常错误设置定义处理器，则通过在包含块中引发它来传播异常错误。然后对该包含块执行步骤<span style="font-family:Arial; margin:0px; padding:0px">1)</span><span style="font-family:宋体; margin:0px; padding:0px">。</span></span></p><p class="p0" style="margin:0pt auto 0pt 21pt; padding-top:0px; padding-bottom:0px; text-indent:-21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span>&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p><h3 style="margin:0pt 0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif"><span style="margin:0px; padding:0px; color:rgb(17,17,17); font-size:10.5pt; line-height:1.8em; font-family:Arial"><a target="_blank" name="_Toc9083" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204)">5.2.2&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">在声明部分引发异常错误</span></a></span><span style="margin:0px; padding:0px; color:rgb(17,17,17); font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></h3><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp;&nbsp;&nbsp;如果在声明部分引起异常情况，即在声明部分出现错误，那么该错误就能影响到其它的块。比如在有如下的<span style="font-family:Arial; margin:0px; padding:0px">PL/SQL</span><span style="font-family:宋体; margin:0px; padding:0px">程序：</span></span></p><span style="font-family:宋体; margin:0px; padding:0px; color:rgb(17,17,17); font-size:13px; line-height:23px"></span><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; font-size:12px; border:1px solid rgb(204,204,204); overflow:auto"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">DECLARE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">varchar2</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>12</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">):</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">EricHu</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;其它语句<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;其它语句<br style="margin:0px; padding:0px">EXCEPTION<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;OTHERS&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;其它语句<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="font-family:宋体; margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span>&nbsp;</p><span style="color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"></span><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp;&nbsp;&nbsp; 例子中，由于<span style="font-family:Arial; margin:0px; padding:0px">Abc&nbsp;number(3)=’abc’;&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">出错，尽管在</span><span style="font-family:Arial; margin:0px; padding:0px">EXCEPTION</span><span style="font-family:宋体; margin:0px; padding:0px">中说明了</span><span style="font-family:Arial; margin:0px; padding:0px">WHEN&nbsp;OTHERS&nbsp;THEN</span><span style="font-family:宋体; margin:0px; padding:0px">语句，但</span><span style="font-family:Arial; margin:0px; padding:0px">WHEN&nbsp;OTHERS&nbsp;THEN</span><span style="font-family:宋体; margin:0px; padding:0px">也不会被执行。&nbsp;但是如果在该错误语句块的外部有一个异常错误，则该错误能被抓住，如：</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:Arial"><strong>&nbsp;</strong></span></p><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto; color:rgb(17,17,17)"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">DECLARE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">varchar2</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>12</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">):</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">EricHu</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;其它语句<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;其它语句<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;EXCEPTION<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;OTHERS&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;其它语句<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;<br style="margin:0px; padding:0px">EXCEPTION<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;OTHERS&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;其它语句<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:Arial"><strong></strong></span>&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:Arial"><strong><a target="_blank" name="_Toc12394" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204)">5.3&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">异常错误处理编程</span></a></strong></span><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p><p class="p18" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp;&nbsp;&nbsp;在一般的应用处理中，建议程序人员要用异常处理，因为如果程序中不声明任何异常处理，则在程序运行出错时，程序就被终止，并且也不提示任何信息。下面是使用系统提供的异常来编程的例子。</span></p><p class="p18" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span>&nbsp;</p><p class="p18" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:Arial"><strong><a target="_blank" name="_Toc26827" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204)">5.4&nbsp;&nbsp;<span style="font-family:宋体; margin:0px; padding:0px">在&nbsp;</span><span style="font-family:Arial; margin:0px; padding:0px">PL/SQL&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">中使用&nbsp;</span><span style="font-family:Arial; margin:0px; padding:0px">SQLCODE,&nbsp;SQLERRM</span></a></strong></span><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:宋体"><strong>异常处理函数</strong></span><span style="margin:0px; padding:0px; font-size:12pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp;&nbsp;&nbsp;由于<span style="font-family:Arial; margin:0px; padding:0px">ORACLE&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">的错信息最大长度是</span><span style="font-family:Arial; margin:0px; padding:0px">512</span><span style="font-family:宋体; margin:0px; padding:0px">字节，为了得到完整的错误提示信息，我们可用&nbsp;</span><span style="font-family:Arial; margin:0px; padding:0px">SQLERRM</span><span style="font-family:宋体; margin:0px; padding:0px">和&nbsp;</span><span style="font-family:Arial; margin:0px; padding:0px">SUBSTR&nbsp;</span><span style="font-family:宋体; margin:0px; padding:0px">函数一起得到错误提示信息</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">，方便进行错误，特别是如果</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">WHEN&nbsp;OTHERS<span style="font-family:宋体; margin:0px; padding:0px">异常处理器时更为方便。</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">SQLCODE</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;返回</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">遇到的</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">Oracle<span style="font-family:宋体; margin:0px; padding:0px">错误号</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">,</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">SQLERRM&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">返回</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">遇到的</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">Oracle</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">错误信息<span style="font-family:Arial; margin:0px; padding:0px">.</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>如<span style="font-family:Arial; margin:0px; padding:0px">:</span></strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;&nbsp;SQLCODE=-100&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Wingdings">è</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;SQLERRM=’no_data_found&nbsp;‘</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体">&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">SQLCODE=0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Wingdings">è</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">&nbsp;SQLERRM=’normal,&nbsp;successfual&nbsp;completion’</span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; text-indent:21pt; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>例</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体"><strong>6</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>.&nbsp;</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">将<span style="font-family:Arial; margin:0px; padding:0px">ORACLE</span><span style="font-family:宋体; margin:0px; padding:0px">错误代码及其信息存入错误代码表</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span>&nbsp;</p><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto; color:rgb(17,17,17)"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">CREATE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">TABLE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;errors&nbsp;(errnum&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">NUMBER</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>4</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">),&nbsp;errmsg&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">VARCHAR2</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>100</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">));<br style="margin:0px; padding:0px"><br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">DECLARE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;err_msg&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">VARCHAR2</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>100</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5">/*</span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5">&nbsp;&nbsp;得到所有&nbsp;ORACLE&nbsp;错误信息&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5">*/</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">FOR</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;err_num&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">IN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">-</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>100</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;..&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>0</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;LOOP<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err_msg&nbsp;:</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">=</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;SQLERRM(err_num);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INSERT</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INTO</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;errors&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">VALUES</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(err_num,&nbsp;err_msg);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;LOOP;<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">DROP</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">TABLE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;errors;</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span>&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>例</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体"><strong>7</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>.&nbsp;</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">查询<span style="font-family:Arial; margin:0px; padding:0px">ORACLE</span><span style="font-family:宋体; margin:0px; padding:0px">错误代码；</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; color:rgb(0,128,128); font-size:10.5pt; line-height:1.8em; font-family:'Courier New'"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>&nbsp;</strong></span></p><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto; color:rgb(17,17,17)"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INSERT</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INTO</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;employees(employee_id,&nbsp;first_name,last_name,hire_date,department_id)<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">VALUES</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>2222</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">Eric</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">Hu</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,&nbsp;SYSDATE,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>20</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">插入数据记录成功!</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INSERT</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INTO</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;employees(employee_id,&nbsp;first_name,last_name,hire_date,department_id)<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">VALUES</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>2222</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">胡</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">勇</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,&nbsp;SYSDATE,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>20</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">插入数据记录成功!</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">EXCEPTION<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;OTHERS&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(SQLCODE</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">---</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">SQLERRM);<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong></strong></span>&nbsp;</p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>例</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:宋体"><strong>8</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"><strong>.&nbsp;</strong></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial">利用<span style="font-family:Arial; margin:0px; padding:0px">ORACLE</span><span style="font-family:宋体; margin:0px; padding:0px">错误代码，编写异常错误处理代码；</span></span><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; font-size:10.5pt; line-height:1.8em; font-family:Arial"></span></p><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px"><span style="margin:0px; padding:0px; color:rgb(0,128,128); font-size:10.5pt; line-height:1.8em; font-family:'Courier New'">&nbsp;</span></p><div class="cnblogs_code" style="margin:5px 0px; padding:5px; background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); overflow:auto; color:rgb(17,17,17)"><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div><div style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">DECLARE</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;empno_remaining&nbsp;EXCEPTION;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;PRAGMA&nbsp;EXCEPTION_INIT(empno_remaining,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">-</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>1</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5">/*</span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5">&nbsp;-1&nbsp;是违反唯一约束条件的错误代码&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5">*/</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">BEGIN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INSERT</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INTO</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;employees(employee_id,&nbsp;first_name,last_name,hire_date,department_id)<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">VALUES</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>3333</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">Eric</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">Hu</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,&nbsp;SYSDATE,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>20</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">插入数据记录成功!</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INSERT</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">INTO</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;employees(employee_id,&nbsp;first_name,last_name,hire_date,department_id)<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">VALUES</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">(</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>3333</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">胡</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">勇</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">,SYSDATE,&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(128,0,0); line-height:1.5"><strong>20</strong></span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">插入数据记录成功!</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">EXCEPTION<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;empno_remaining&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">违反数据完整性约束!</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">);<br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">WHEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">&nbsp;OTHERS&nbsp;</span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">THEN</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5"><br style="margin:0px; padding:0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBMS_OUTPUT.PUT_LINE(SQLCODE</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">---</span><span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5">'</span><span style="margin:0px; padding:0px; color:rgb(128,128,128); line-height:1.5">||</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">SQLERRM);<br style="margin:0px; padding:0px"></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5">END</span><span style="margin:0px; padding:0px; color:rgb(0,0,0); line-height:1.5">;</span></div><div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; color:rgb(0,102,204); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; border:none!important"></a></span></div></div><p class="p0" style="margin:0pt auto; padding-top:0px; padding-bottom:0px; color:rgb(17,17,17); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:13px; line-height:23px">&nbsp;</p>            <div>                作者：xuelanggongwu 发表于2013-8-12 12:52:24 <a href="http://blog.csdn.net/perfect_db/article/details/9922433">原文链接</a>            </div>            <div>            阅读：38 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/9922433#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[转]DB_nK_CACHE_SIZE参数设置与数据库默认块大小之间的限制]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9919793</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9919793</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-12 11:17:47</pubDate>
			
			<description><![CDATA[            <p><span style="font-family:Courier New; font-size:14px">摘自：<a target="_blank" href="http://space.itpub.net/519536/viewspace-705241">http://space.itpub.net/519536/viewspace-705241</a></span></p><p><span style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br></span></p><p><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">“DB_nK_CACHE_SIZE”<a target="_blank" target="_self" style="word-break:break-all; text-decoration:underline; color:rgb(0,153,153)"><span style="word-break:break-all"><span style="word-break:break-all">参数</span></span></a>的取&#20540;有很多种，有2k、4k、8k、16k、32k。在设置此参数时，我们需要注意的是，与<a target="_blank" target="_self" style="word-break:break-all; text-decoration:underline; color:rgb(0,153,153)"><span style="word-break:break-all"><span style="word-break:break-all">数据库</span></span></a>默认的块尺寸相同的那个参数是不能被设定的。例如，如果数据库的默认块尺寸是8k，那么当我们尝试设置“DB_8K_CACHE_SIZE”参数时便会遭遇报错（报错内容：ORA-00380: cannot specify db_8k_cache_size since 8K is the standard block size）。这是由于这个信息已经体现在“db_cache_size”参数上。</span></p><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">&nbsp; 这里给出具体直观的体验过程。</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'"><strong>1.查看数据库默认的块大小</strong></span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">sys@ora10g&gt; show parameter db_block_size</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TYPE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VALUE</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">------------------------- -------------------- -------------</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_block_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">此处显示，数据库的默认块大小是8K。</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'"><strong>2.查看所有与cache size相关的参数</strong></span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">sys@ora10g&gt; show parameter cache_size</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TYPE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VALUE</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">------------------------- -------------------- -------------</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_16k_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_2k_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_32k_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_4k_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_8k_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_keep_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_recycle_cache_size&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">这里列出了2k、4k、8k、16k、32k多种可设置的参数信息。</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'; font-weight:bold"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'"><strong>3.尝试调整非数据库默认块大小对应的参数</strong></span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">sys@ora10g&gt; alter system set db_16k_cache_size=1m ;</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">System altered.</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">sys@ora10g&gt; show parameter cache_size</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TYPE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VALUE</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">------------------------- -------------------- -------------</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_16k_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16M</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_2k_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_32k_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_4k_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_8k_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_keep_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">db_recycle_cache_size&nbsp;&nbsp;&nbsp;&nbsp; big integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">调整成功，注意这里的一个现象，设置的是1M大小，系统会自动将这个数&#20540;进行调整，调整的依据是：values greater than zero are automatically modified to be either the user-specified-size rounded up to granule size or 4MB * number of CPUs * granule size, whichever is greater</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'"><strong>4.尝试调整数据库默认块大小对应的参数</strong></span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">这里我们数据库的默认块大小是8k，因此，这里我们尝试调整“db_8k_cache_size”这个参数。</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">sys@ora10g&gt; alter system set db_8k_cache_size=1m;</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">alter system set db_8k_cache_size=1m</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">*</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">ERROR at line 1:</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">ORA-32017: failure in updating SPFILE</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">ORA-00380: cannot specify db_8k_cache_size since 8K is the standard block size</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">此处便遇到了“ORA-00380”错误提示。</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'"><strong>5.小结</strong></span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">&nbsp; 当数据库使用非标准块表空间时，“DB_nK_CACHE_SIZE”参数将会派上用场，正所谓特殊场合特殊设置，因此在默认块尺寸下我们毋须设置与之对应的cache参数。</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">Good luck.</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'"><a target="_blank" target="_self" style="word-break:break-all; text-decoration:underline; color:rgb(0,153,153)"><span style="word-break:break-all"><span style="word-break:break-all">secooler</span></span></a></span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">11.08.17</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><br style="word-break:break-all; font-size:14px; font-family:'Courier New'"><span style="word-break:break-all; font-size:14px; font-family:'Courier New'">-- The End --</span><br style="word-break:break-all; font-size:14px; font-family:'Courier New'">            <div>                作者：xuelanggongwu 发表于2013-8-12 11:17:47 <a href="http://blog.csdn.net/perfect_db/article/details/9919793">原文链接</a>            </div>            <div>            阅读：23 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/9919793#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]控制文件的备份与恢复（RMAN工具）]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9900679</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9900679</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-11 16:23:52</pubDate>
			
			<description><![CDATA[            <p><span style="color:#3366ff">本篇说明控制文件在全部丢失的情况下，利用Rman工具自动备份的控制文件转储并恢复数据库；</span></p><p><span style="color:#3366ff">之前写过一篇关于手动“控制文件的备份与恢复” ，请查阅</span>：<a target="_blank" target="_blank" href="http://blog.csdn.net/perfect_db/article/details/8805111">http://blog.csdn.net/perfect_db/article/details/8805111</a></p><p><br></p><p><span style="color:#3333ff">数据库版本</span></p><p>SQL&gt; <span style="color:#ff0000">select * from v$version;</span><br><br>BANNER<br>--------------------------------------------------------------------------------<br>Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production<br>PL/SQL Release 11.2.0.1.0 - Production<br>CORE &nbsp; &nbsp;11.2.0.1.0 &nbsp; &nbsp; &nbsp;Production<br>TNS for 32-bit Windows: Version 11.2.0.1.0 - Production<br>NLSRTL Version 11.2.0.1.0 - Production<br></p><p><br></p><p>C:\\Documents and Settings\\Administrator&gt;<span style="color:#ff0000">rman target / catalog rm_user/rm_user</span><br><br>恢复管理器: Release 11.2.0.1.0 - Production on 星期日 8月 11 16:00:49 2013<br>Copyright (c) 1982, 2009, Oracle and/or its affiliates. &nbsp;All rights reserved.<br>连接到目标数据库: ORCL (DBID=1318810635)<br>连接到恢复目录数据库<br></p><p><br></p><p><span style="color:#3366ff">查看rman 配置</span></p><p>RMAN&gt; <span style="color:#ff0000">show all;</span><br>db_unique_name 为 ORCL 的数据库的 RMAN 配置参数为:<br>CONFIGURE RETENTION POLICY TO REDUNDANCY 1; # default<br>CONFIGURE BACKUP OPTIMIZATION OFF; # default<br>CONFIGURE DEFAULT DEVICE TYPE TO DISK; # default<br><span style="color:#ff0000"><strong>CONFIGURE CONTROLFILE AUTOBACKUP ON;</strong></span><br>CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK TO 'f:\\rmanbackup\\controlfile\\%F';<br>CONFIGURE DEVICE TYPE DISK PARALLELISM 1 BACKUP TYPE TO BACKUPSET; # default<br>CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default<br>CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default<br>CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT &nbsp; 'd:\\backup\\%d_%s.bak';<br>CONFIGURE MAXSETSIZE TO UNLIMITED; # default<br>CONFIGURE ENCRYPTION FOR DATABASE OFF; # default<br>CONFIGURE ENCRYPTION ALGORITHM 'AES128'; # default<br>CONFIGURE COMPRESSION ALGORITHM 'BASIC' AS OF RELEASE 'DEFAULT' OPTIMIZE FOR LOAD TRUE ; # default<br>CONFIGURE ARCHIVELOG DELETION POLICY TO NONE; # default<br>CONFIGURE SNAPSHOT CONTROLFILE NAME TO 'E:\\APP\\ADMINISTRATOR\\PRODUCT\\11.2.0\\DBHOME_1\\DATABASE\\SNCFORCL.ORA'; # default<br></p><p><br></p><p><span style="color:#3366ff">说明控制文件的备份策略为自动备份；那么就先任意备份一个数据文件（本次就用备份此数据文件时自动备份的控制文件）</span></p><p>RMAN&gt; <span style="color:#ff0000">backup datafile 7;</span><br><br><br>启动 backup 于 11-8月 -13<br>使用通道 ORA_DISK_1<br>通道 ORA_DISK_1: 正在启动全部数据文件备份集<br>通道 ORA_DISK_1: 正在指定备份集内的数据文件<br>输入数据文件: 文件号=00007 名称=E:\\RMAN.DBF<br>通道 ORA_DISK_1: 正在启动段 1 于 11-8月 -13<br>通道 ORA_DISK_1: 已完成段 1 于 11-8月 -13<br>段句柄=D:\\BACKUP\\ORCL_167.BAK 标记=TAG20130811T152451 注释=NONE<br>通道 ORA_DISK_1: 备份集已完成, 经过时间:00:00:03<br>完成 backup 于 11-8月 -13<br><br><br>启动 Control File and SPFILE Autobackup 于 11-8月 -13<br>段 handle=<span style="color:#ff0000">F:\\RMANBACKUP\\CONTROLFILE\\C-1318810635-20130811-00</span>comment=NONE<br>完成 Control File and SPFILE Autobackup 于 11-8月 -13<br><br><br>RMAN&gt; <span style="color:#ff0000">shutdown immediate;</span><br>数据库已关闭<br>数据库已卸装<br>Oracle 实例已关闭</p><p><br></p><p><strong><span style="color:#3366ff">手动删除所有控制文件；</span></strong></p><p><br><span style="color:#3366ff">以下是恢复步骤；</span></p><p><br>RMAN&gt; <span style="color:#ff0000">startup nomount;</span><br>数据库已经启动<br><br><br>RMAN&gt; <span style="color:#ff6666">restore controlfile from autobackup;</span><br><br><br>启动 restore 于 11-8月 -13<br>RMAN-00571: ===========================================================<br>RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============<br>RMAN-00571: ===========================================================<br>RMAN-03002: restore 命令 (在 08/11/2013 15:28:47 上) 失败<br>RMAN-06004: 恢复目录数据库发生 ORACLE 错误: ORA-03114: 未连接到 ORACLE<br><br><br><span style="color:#3366ff">说明关闭数据库之后已经断开了与数据库的链接；<br></span><br>RMAN&gt; <span style="color:#ff6666">exit</span><br><br>恢复管理器完成。</p><p><span style="color:rgb(255,0,0); font-family:Arial; font-size:14px; line-height:26px">Blog:&nbsp;&nbsp;&nbsp;&nbsp;http://blog.csdn.net/perfect_db</span><br><br><span style="color:#3366ff">由于数据库启动不了，所以恢复目录用不了，那么就只连接到目标数据库；<br></span>C:\\Documents and Settings\\Administrator&gt;<span style="color:#ff6666">rman target /</span><br><br>恢复管理器: Release 11.2.0.1.0 - Production on 星期日 8月 11 15:30:05 2013<br>Copyright (c) 1982, 2009, Oracle and/or its affiliates. &nbsp;All rights reserved.<br>连接到目标数据库: ORCL (未装载)<br><br>RMAN&gt; <span style="color:#ff6666">startup nomount;</span><br><br>数据库已经启动<br><br>RMAN&gt; <span style="color:#ff6666">restore controlfile from autobackup;</span><br><br><br>启动 restore 于 11-8月 -13<br>使用目标数据库控制文件替代恢复目录<br>分配的通道: ORA_DISK_1<br>通道 ORA_DISK_1: SID=133 设备类型=DISK<br><br>恢复区目标: F:\\rmanbackup<br>用于搜索的数据库名 (或数据库的唯一名称): ORCL<br>通道 ORA_DISK_1: 在恢复区中没有找到 AUTOBACKUP<br>由于未设置 DBID 而未尝试使用&#26684;式 &quot;%F&quot; 搜索 AUTOBACKUP<br>RMAN-00571: ===========================================================<br>RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============<br>RMAN-00571: ===========================================================<br>RMAN-03002: restore 命令 (在 08/11/2013 15:30:20 上) 失败<br>RMAN-06172: 没有找到 AUTOBACKUP, 或者指定的句柄不是有效副本或片段<br><br><br>RMAN&gt; <span style="color:#ff6666">restore controlfile from 'f:\\rmanbackup\\controlfile\\C-1318810635-20130811-00';</span><br><br><br>启动 restore 于 11-8月 -13<br>使用通道 ORA_DISK_1<br>通道 ORA_DISK_1: 正在还原控制文件<br>通道 ORA_DISK_1: 还原完成, 用时: 00:00:03<br><span style="color:#ff6666">输出文件名=E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\CONTROL01.CTL<br>输出文件名=E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\CONTROL02.CTL</span><br>完成 restore 于 11-8月 -13<br><br><br><span style="color:#3366ff">经查看，发现控制文件已经被转储到目标位置；<br></span><br>RMAN&gt; <span style="color:#ff6666">alter database mount;</span><br><br><br>数据库已装载<br>释放的通道: ORA_DISK_1<br><br><br>RMAN&gt; <span style="color:#ff6666">recover database;</span><br><br><br>启动 recover 于 11-8月 -13<br>启动 implicit crosscheck backup 于 11-8月 -13<br>分配的通道: ORA_DISK_1<br>通道 ORA_DISK_1: SID=133 设备类型=DISK<br>已交叉检验的 2 对象<br>完成 implicit crosscheck backup 于 11-8月 -13<br><br>启动 implicit crosscheck copy 于 11-8月 -13<br>使用通道 ORA_DISK_1<br>完成 implicit crosscheck copy 于 11-8月 -13<br><br>搜索恢复区中的所有文件<br>正在编制文件目录...<br>没有为文件编制目录<br><br>使用通道 ORA_DISK_1<br><br>正在开始介质的恢复<br><br>线程 1 序列 190 的归档日志已作为文件 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\REDO03.LOG 存在于磁盘上<br>归档日志文件名=E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\REDO03.LOG 线程=1 序列=190<br>介质恢复完成, 用时: 00:00:03<br>完成 recover 于 11-8月 -13<br><br><br>RMAN&gt; <span style="color:#ff6666">alter database open resetlogs</span>;<br><br><br>数据库已打开<br><br>&nbsp;</p><p>其中OCP 有一道考察这样的题目：</p><p>Q606. You realize that the control file is damaged in your production database. After restoring the control file from autobackup, what is the next step that you must do to proceed with the database recovery?</p><p>&nbsp;</p><p>A. Mount the database</p><p>B. Open the database in NORMAL mode</p><p>C. Open the database in RESTRICTED mode</p><p>D. Open the database with the RESETLOGS option</p><p>&nbsp;</p><p>Answer: A</p><p><br></p><p>Recovering Using RMAN Backups Restoring the Control File from the Autobackup</p><p>Restoring the control file from an autobackup is similar to the steps you use to restore an SPFILE from an&nbsp;autobackup.</p><p><span style="color:red">RMAN&gt; startup nomount;</span></p><p><span style="color:red">RMAN&gt; restore controlfile from autobackup;</span></p><p><span style="color:red">RMAN&gt; alter database mount;</span></p><p><span style="color:red">RMAN&gt; recover database;</span></p><p><span style="color:red">RMAN&gt; alter database open resetlogs;</span></p><p>Note that since there is no control file, you have to open the database with NOMOUNT and then restore the control file. After you mount the database, you must recover the database, because the backup control file contains information about an older version of the database. For the same&nbsp; reason, you must open the database &nbsp;with RESETLOGS. RMAN restores the control file to all locations specified by theinitialization parameter CONTROL_FILES. If one or more of those locations are still not available, you will have to edit the CONTROL_FILES parameter to specify alternative locations or temporarily restore the control file to adifferent location；</p><p><br></p><p></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">-----------------------------------------------------------------------------------------------------------------------</p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; color:rgb(51,102,255)"><span style="color:red">博文所有内容均属原创，文章允许转载，但必须以链接方式注明源地址，否则追究法律责任</span><span style="color:red">!</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; color:rgb(51,102,255)"><span style="color:red">Blog:&nbsp;&nbsp;&nbsp;&nbsp;http://blog.csdn.net/perfect_db</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; color:rgb(51,102,255)"><span style="color:red">Email: &nbsp;&nbsp;</span><a target="_blank" target="_blank" href="mailto:tianlesoftware@gmail.com" style="color:rgb(202,0,0); text-decoration:none"><span style="color:red">p</span></a><span style="color:red">erfect_db@sina.com</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; color:rgb(51,102,255)"><span style="color:red">&nbsp; &nbsp;QQ: &nbsp; 787266309</span></p><br>            <div>                作者：xuelanggongwu 发表于2013-8-11 16:23:52 <a href="http://blog.csdn.net/perfect_db/article/details/9900679">原文链接</a>            </div>            <div>            阅读：246 评论：1 <a href="http://blog.csdn.net/perfect_db/article/details/9900679#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]ora-28056 (Writing audit records to Windows Event Log failed)]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9820055</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9820055</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-7 17:28:56</pubDate>
			
			<description><![CDATA[            <p>系统：windows xp</p><p>oracle 版本</p><p>SQL&gt; <span style="color:#ff0000">select * from v$version;</span><br>BANNER<br>--------------------------------------------------------------------------------<br>Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production<br>PL/SQL Release 11.2.0.1.0 - Production<br>CORE &nbsp; &nbsp;11.2.0.1.0 &nbsp; &nbsp; &nbsp;Production<br>TNS for 32-bit Windows: Version 11.2.0.1.0 - Production<br>NLSRTL Version 11.2.0.1.0 - Production<br></p><p><br></p><p>用sql*plus登录数据库，收到了ora-28056 错误；<br></p><p><br></p><p>Microsoft Windows XP [版本 5.1.2600]</p>(C) 版权所有 1985-2001 Microsoft Corp.<br>C:\\Documents and Settings\\Administrator&gt;<span style="color:#ff0000">sqlplus / as sysdba</span><br>SQL*Plus: Release 11.2.0.1.0 Production on 星期三 8月 7 17:05:19 2013<br>Copyright (c) 1982, 2010, Oracle. &nbsp;All rights reserved.<br><br>ERROR:<br>ORA-28056: Writing audit records to Windows Event Log failed<br>ORA-28056: Writing audit records to Windows Event Log failed<br><br>请输入用户名:<br>ERROR:<br>ORA-01017: 用户名/口令无效; 登录被拒绝<br><br>请输入用户名:<br>ERROR:<br>ORA-01017: 用户名/口令无效; 登录被拒绝<br><br><p>SP2-0157: 在 3 次尝试之后无法连接到 ORACLE, 退出 SQL*Plus</p><p><br></p><p>检查oracle服务存在，也启动了；于是就官网查看错误：</p><p></p><dt style="font-weight:bold; color:rgb(34,34,34); font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><span class="msg">ORA-28056: Writing audit records to Windows Event Log failed</span></dt><dd style="margin-bottom:2ex; color:rgb(34,34,34); font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><div class="msgexplan" style="max-width:70em"><span class="msgexplankw" style="font-weight:bold">Cause:</span>&nbsp;Unable to write an audit entry to the Windows event log used as the audit trail.</div></dd><dd style="margin-bottom:2ex; color:rgb(34,34,34); font-family:Tahoma,sans-serif; font-size:12px; line-height:19px"><div class="msgaction" style="max-width:70em"><span class="msgactionkw" style="font-weight:bold">Action:</span>&nbsp;Check the error number for a possible operating system error. If there is no error, contact Oracle Support Services.</div>于是就把系统的“事件查看器”日志清除，Ok，搞定；<p></p></dd>            <div>                作者：xuelanggongwu 发表于2013-8-7 17:28:56 <a href="http://blog.csdn.net/perfect_db/article/details/9820055">原文链接</a>            </div>            <div>            阅读：191 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/9820055#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[转]Oracle 11g 新特性——隐式索引（Invisible Index）]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9747775</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9747775</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-4 16:16:54</pubDate>
			
			<description><![CDATA[            <p>转载自：<a target="_blank" href="http://space.itpub.net/23161469/viewspace-751274" target="_blank">http://space.itpub.net/23161469/viewspace-751274</a></p><p>Oracle 11g开始，可以创建隐式索引。优化器会忽略隐式索引，除非在系统或者会话级别设置初始化参数OPTIMIZER_USE_INVISIBLE_INDEXES = TRUE，该参数默认是FALSE。隐式索引用来替代使索引不可用或者删除索引。通过隐式索引，可以完成如下操作：</p><p>（1）&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在删除索引之前测试要删除的索引。</p><p>（2）&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 对运用程序特定的操作或模块使用临时索引结构，从而不影响整个运用。</p><p>与不可用索引不同，隐式索引在执行DML期间仍然会维护。</p><p><br>创建隐式索引：</p><p>CREATE&nbsp; INDEX&nbsp;&nbsp; index_name&nbsp;&nbsp;&nbsp; ON TABLE_NAME( column_name )&nbsp;&nbsp;&nbsp;&nbsp; INVISIBLE;</p><p>&nbsp;</p><p>或者通过使用ALTER&nbsp;&nbsp;&nbsp;&nbsp; INDEX命令修改：</p><p>ALTER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INDEX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INVISIBLE;</p><p>ALTER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INDEX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; index_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VISIBLE;</p><p>&nbsp;</p><p>通过*_INDEXES数据字典视图的VISIBILITY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 列来确定索引是VISIBLE还是INVISIBLE。</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>示例：</p><p>----创建测试表：</p><p>SQL&gt; create table ii_test (</p><p>&nbsp;2 i number )</p><p>&nbsp;3 ;</p><p>&nbsp;</p><p>Table created.</p><p>----插入测试数据：</p><p>SQL&gt; begin</p><p>&nbsp;2 for i in 1.. 10000 loop</p><p>&nbsp;3&nbsp;&nbsp; insert into ii_test values (i);</p><p>&nbsp;4 end loop;</p><p>&nbsp;5 commit;</p><p>&nbsp;6 end;</p><p>&nbsp;7 /</p><p>&nbsp;</p><p>PL/SQL procedure successfully completed.</p><p>&nbsp;</p><p>----创建隐式索引：</p><p>SQL&gt; create index ii_test_id on ii_test(i) invisible;</p><p>&nbsp;</p><p>Index created.</p><p>&nbsp;</p><p>----收集统计信息：</p><p>SQL&gt;EXEC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DBMS_STATS.GATHER_TABLE_STATS(ownname=&gt;'test',tabname=&gt;'ii_test',cascade=&gt;true);</p><p>&nbsp;</p><p>PL/SQL procedure successfully completed.</p><p>&nbsp;</p><p>----where条件查询：</p><p>SQL&gt; set autot trace exp</p><p>SQL&gt; select * from ii_test where i=580;</p><p>&nbsp;</p><p>&nbsp;</p><p>Execution Plan</p><p>----------------------------------------------------------</p><p>Plan hash value: 4113430834</p><p>&nbsp;</p><p>-----------------------------------------------------------------------------</p><p>| Id | Operation&nbsp;&nbsp;&nbsp; | Name&nbsp;&nbsp; | Rows | Bytes | Cost (%CPU)| Time&nbsp;&nbsp;&nbsp; |</p><p>-----------------------------------------------------------------------------</p><p>|&nbsp; 0 | SELECT STATEMENT |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp; (0)| 00:00:01 |</p><p>|* 1 | TABLE ACCESS FULL| II_TEST |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp; (0)| 00:00:01 |</p><p>-----------------------------------------------------------------------------</p><p>&nbsp;</p><p>Predicate Information (identified by operation id):</p><p>---------------------------------------------------</p><p>&nbsp;</p><p>&nbsp; 1 - filter(&quot;I&quot;=580)</p><p>&nbsp;</p><p>----在会话级修改OPTIMIZER_USE_INVISIBLE_INDEXES = TRUE并在次测试：</p><p>SQL&gt; alter session set OPTIMIZER_USE_INVISIBLE_INDEXES = TRUE;</p><p>&nbsp;</p><p>Session altered.</p><p>&nbsp;</p><p>SQL&gt; select * from ii_test where i=580;</p><p>&nbsp;</p><p>&nbsp;</p><p>Execution Plan</p><p>----------------------------------------------------------</p><p>Plan hash value: 3143506905</p><p>&nbsp;</p><p>-------------------------------------------------------------------------------</p><p>| Id | Operation&nbsp;&nbsp; | Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Rows | Bytes | Cost (%CPU)| Time&nbsp;&nbsp;&nbsp; |</p><p>-------------------------------------------------------------------------------</p><p>|&nbsp; 0 | SELECT STATEMENT |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 1(0)| 00:00:01 |</p><p>|* 1 | INDEX RANGE SCAN| II_TEST_ID |&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (0)| 00:00:01 |</p><p>-------------------------------------------------------------------------------</p><p>&nbsp;</p><p>Predicate Information (identified by operation id):</p><p>---------------------------------------------------</p><p>&nbsp;</p><p>&nbsp; 1 - access(&quot;I&quot;=580)</p><p>&nbsp;</p><p>----设置OPTIMIZER_USE_INVISIBLE_INDEXES = FALSE，并使用hint测试：</p><p>SQL&gt; alter session set OPTIMIZER_USE_INVISIBLE_INDEXES = FALSE ;</p><p>&nbsp;</p><p>Session altered.</p><p>&nbsp;</p><p>SQL&gt; select /*&#43;index(test ii_test_id)*/ * from ii_test where i=580;</p><p>&nbsp;</p><p>&nbsp;</p><p>Execution Plan</p><p>----------------------------------------------------------</p><p>Plan hash value: 4113430834</p><p>&nbsp;</p><p>-----------------------------------------------------------------------------</p><p>| Id | Operation&nbsp;&nbsp; | Name&nbsp;&nbsp; | Rows | Bytes | Cost (%CPU)| Time&nbsp;&nbsp;&nbsp; |</p><p>-----------------------------------------------------------------------------</p><p>|&nbsp; 0 | SELECT STATEMENT |&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp; 4 |&nbsp;&nbsp; 7&nbsp; (0)| 00:00:01 |</p><p>|* 1 | TABLE ACCESS FULL| II_TEST |&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp; 4 |&nbsp;&nbsp; 7&nbsp; (0)| 00:00:01 |</p><p>-----------------------------------------------------------------------------</p><p>&nbsp;</p><p>Predicate Information (identified by operation id):</p><p>---------------------------------------------------</p><p>&nbsp;</p><p>&nbsp; 1 - filter(&quot;I&quot;=580)</p><p>由此可见对于invisible的索引，hint无效；</p><p>----将索引改为visible测试：</p><p>SQL&gt; alter index ii_test_id visible;</p><p>&nbsp;</p><p>Index altered.</p><p>&nbsp;</p><p>SQL&gt; select * from ii_test where i=580;</p><p>&nbsp;</p><p>&nbsp;</p><p>Execution Plan</p><p>----------------------------------------------------------</p><p>Plan hash value: 3143506905</p><p>&nbsp;</p><p>-------------------------------------------------------------------------------</p><p>| Id | Operation&nbsp; | Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Rows | Bytes | Cost (%CPU)| Time&nbsp;&nbsp;&nbsp; |</p><p>-------------------------------------------------------------------------------</p><p>|&nbsp; 0 | SELECT STATEMENT |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 1 (0)| 00:00:01 |</p><p>|* 1 | INDEX RANGE SCAN| II_TEST_ID |&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 1 (0)| 00:00:01 |</p><p>-------------------------------------------------------------------------------</p><p>&nbsp;</p><p>Predicate Information (identified by operation id):</p><p>---------------------------------------------------</p><p>&nbsp;</p><p>&nbsp; 1 - access(&quot;I&quot;=580)</p><p><br>&nbsp;</p>            <div>                作者：xuelanggongwu 发表于2013-8-4 16:16:54 <a href="http://blog.csdn.net/perfect_db/article/details/9747775">原文链接</a>            </div>            <div>            阅读：46 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/9747775#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]change...keep （rman 长期备份）]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9745909</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9745909</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-4 12:42:06</pubDate>
			
			<description><![CDATA[            <p><span style="color:#3333ff">长期备份是指根据change命令设置来决定何时把备份的文件标记为“废弃”；&nbsp;</span></p><p><br></p><p>SQL&gt;<span style="color:#ff0000"> select * from v$version;</span><br><br>BANNER<br>-------------------------------------------------------------------------------<br>Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production<br>PL/SQL Release 11.2.0.1.0 - Production<br>CORE &nbsp; &nbsp;11.2.0.1.0 &nbsp; &nbsp; &nbsp;Production<br>TNS for 32-bit Windows: Version 11.2.0.1.0 - Production<br>NLSRTL Version 11.2.0.1.0 - Production<br></p><p><br></p><p>RMAN&gt;<span style="color:#ff0000"> list backup;</span></p>说明与资料档案库中的任何备份都不匹配<br><br>RMAN&gt; <span style="color:#ff0000">backup datafile 6;</span><br>启动 backup 于 04-8月 -13<br>使用通道 ORA_DISK_1<br>通道 ORA_DISK_1: 正在启动全部数据文件备份集<br>通道 ORA_DISK_1: 正在指定备份集内的数据文件<br>输入数据文件: 文件号=00006 名称=E:\\RM_TAB.DBF<br>通道 ORA_DISK_1: 正在启动段 1 于 04-8月 -13<br>通道 ORA_DISK_1: 已完成段 1 于 04-8月 -13<br>段句柄=D:\\BACKUP\\ORCL_159.BAK 标记=TAG20130804T113826 注释=NONE<br>通道 ORA_DISK_1: 备份集已完成, 经过时间:00:00:03<br>完成 backup 于 04-8月 -13<br><br>启动 Control File and SPFILE Autobackup 于 04-8月 -13<br>段 handle=F:\\RMANBACKUP\\CONTROLFILE\\C-1318810635-20130804-03 comment=NONE<br>完成 Control File and SPFILE Autobackup 于 04-8月 -13<br><br><br><br>RMAN&gt; <span style="color:#ff0000">list backup;</span><br>备份集列表<br>===================<br><br>BS 关键字 &nbsp;类型 LV 大小 &nbsp; &nbsp; &nbsp; 设备类型 经过时间 完成时间<br>------- ---- -- ---------- ----------- ------------ ----------<br>135 &nbsp; &nbsp; Full &nbsp; &nbsp;5.85M &nbsp; &nbsp; &nbsp;DISK &nbsp; &nbsp; &nbsp; &nbsp;00:00:02 &nbsp; &nbsp; 04-8月 -13<br>&nbsp; &nbsp; &nbsp; &nbsp; BP 关键字: 134 &nbsp; 状态: AVAILABLE &nbsp;已压缩: NO &nbsp;标记: TAG20130804T113826<br>段名:D:\\BACKUP\\ORCL_159.BAK<br>&nbsp; 备份集 135 中的数据文件列表<br>&nbsp; 文件 LV 类型 Ckp SCN &nbsp; &nbsp;Ckp 时间 &nbsp; 名称<br>&nbsp; ---- -- ---- ---------- ---------- ----<br>&nbsp; 6 &nbsp; &nbsp; &nbsp; Full 33821001663 04-8月 -13 E:\\RM_TAB.DBF<br><br><br>BS 关键字 &nbsp;类型 LV 大小 &nbsp; &nbsp; &nbsp; 设备类型 经过时间 完成时间<br>------- ---- -- ---------- ----------- ------------ ----------<br>136 &nbsp; &nbsp; Full &nbsp; &nbsp;9.55M &nbsp; &nbsp; &nbsp;DISK &nbsp; &nbsp; &nbsp; &nbsp;00:00:03 &nbsp; &nbsp; 04-8月 -13<br>&nbsp; &nbsp; &nbsp; &nbsp; BP 关键字: 135 &nbsp; 状态: AVAILABLE &nbsp;已压缩: NO &nbsp;标记: TAG20130804T113830<br>段名:F:\\RMANBACKUP\\CONTROLFILE\\C-1318810635-20130804-03<br>&nbsp; 包含的 SPFILE: 修改时间: 04-8月 -13<br>&nbsp; 包括的控制文件: Ckp SCN: 33821001682 &nbsp; Ckp 时间: 04-8月 -13<br><br><br>RMAN&gt; <strong><span style="color:#ff0000">change backupset 135 keep forever;</span></strong><br>使用通道 ORA_DISK_1<br>RMAN-00571: ===========================================================<br>RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============<br>RMAN-00571: ===========================================================<br>RMAN-03002: KEEP 命令 (在 08/04/2013 11:41:41 上) 失败<br>RMAN-06522: 在没有恢复目录的情况下, 不支持 KEEP FOREVER 选项<br><p><br></p><p><span style="color:#3366ff">说明该操作必须要在有恢复目录的情况下操作（因为用控制文件代替恢复目录的话，这些备份元数据会因为control_file_record_keep_time的&#20540;而被覆盖，所以保证不了这些策略）；</span></p><br>RMAN&gt; <span style="color:#ff0000">exit</span><br><p>恢复管理器完成。</p>C:\\Documents and Settings\\Administrator&gt;rman target / catalog rm_user/rm_user;<br>恢复管理器: Release 11.2.0.1.0 - Production on 星期日 8月 4 11:42:04 2013<br>Copyright (c) 1982, 2009, Oracle and/or its affiliates. &nbsp;All rights reserved.<br>连接到目标数据库: ORCL (DBID=1318810635)<br>连接到恢复目录数据库<br><br>RMAN&gt; <span style="color:#ff0000">change backupset 135 keep forever;</span><br><br>正在启动全部恢复目录的 resync<br>完成全部 resync<br>分配的通道: ORA_DISK_1<br>通道 ORA_DISK_1: SID=34 设备类型=DISK<br>RMAN-00571: ===========================================================<br>RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============<br>RMAN-00571: ===========================================================<br>RMAN-03002: KEEP 命令 (在 08/04/2013 11:42:31 上) 失败<br>RMAN-06004: 恢复目录数据库发生 ORACLE 错误: RMAN-20215: backup set not found<br>RMAN-06159: 查找备份集时出错<br><br>RMAN&gt; <span style="color:#ff0000">resync catalog;</span><br>正在启动全部恢复目录的 resync<br>完成全部 resync<br><br>RMAN&gt;<span style="color:#ff0000"> list backup;</span><br><br>备份集列表<br>===================<br>BS 关键字 &nbsp;类型 LV 大小 &nbsp; &nbsp; &nbsp; 设备类型 经过时间 完成时间<br>------- ---- -- ---------- ----------- ------------ ----------<br>2850 &nbsp; &nbsp;Full &nbsp; &nbsp;5.85M &nbsp; &nbsp; &nbsp;DISK &nbsp; &nbsp; &nbsp; &nbsp;00:00:02 &nbsp; &nbsp; 04-8月 -13<br>&nbsp; &nbsp; &nbsp; &nbsp; BP 关键字: 2854 &nbsp; 状态: AVAILABLE &nbsp;已压缩: NO &nbsp;标记: TAG20130804T113826<br>段名:D:\\BACKUP\\ORCL_159.BAK<br>&nbsp; 备份集 2850 中的数据文件列表<br>&nbsp; 文件 LV 类型 Ckp SCN &nbsp; &nbsp;Ckp 时间 &nbsp; 名称<br>&nbsp; ---- -- ---- ---------- ---------- ----<br>&nbsp; 6 &nbsp; &nbsp; &nbsp; Full 33821001663 04-8月 -13 E:\\RM_TAB.DBF<br><br><br>BS 关键字 &nbsp;类型 LV 大小 &nbsp; &nbsp; &nbsp; 设备类型 经过时间 完成时间<br>------- ---- -- ---------- ----------- ------------ ----------<br>2851 &nbsp; &nbsp;Full &nbsp; &nbsp;9.55M &nbsp; &nbsp; &nbsp;DISK &nbsp; &nbsp; &nbsp; &nbsp;00:00:03 &nbsp; &nbsp; 04-8月 -13<br>&nbsp; &nbsp; &nbsp; &nbsp; BP 关键字: 2855 &nbsp; 状态: AVAILABLE &nbsp;已压缩: NO &nbsp;标记: TAG20130804T113830<br>段名:F:\\RMANBACKUP\\CONTROLFILE\\C-1318810635-20130804-03<br>&nbsp; 包含的 SPFILE: 修改时间: 04-8月 -13<br>&nbsp; 包括的控制文件: Ckp SCN: 33821001682 &nbsp; Ckp 时间: 04-8月 -13<br><br><p><span style="color:#3366ff">这里看到控制文件和恢复目录记录的同一个备份集的“BS关键字”不同，不过这个不用处理，oracle内部应该有一个映射关系；</span></p><p><br></p>RMAN&gt; <span style="color:#ff0000">change backupset 2850 keep forever;</span><br>使用通道 ORA_DISK_1<br>备份的保留属性被更改<br>备份永远不会废弃<br><p><span style="color:#ff0000">备份集关键字=2850 RECID=135 STAMP=822569908</span></p><p><br></p><p>RMAN&gt; <span style="color:#ff0000">backup &nbsp;database tag='back_database';</span><br><br><br>启动 backup 于 04-8月 -13<br>使用通道 ORA_DISK_1<br>通道 ORA_DISK_1: 正在启动全部数据文件备份集<br>通道 ORA_DISK_1: 正在指定备份集内的数据文件<br>输入数据文件: 文件号=00001 名称=E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\SYSTEM01.DBF<br>输入数据文件: 文件号=00003 名称=E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\SYSAUX01.DBF<br>输入数据文件: 文件号=00004 名称=E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\USERS01.DBF<br>输入数据文件: 文件号=00002 名称=E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\UNDOTBS01.DBF<br>输入数据文件: 文件号=00005 名称=E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\EXAMPLE01.DBF<br>输入数据文件: 文件号=00006 名称=E:\\RM_TAB.DBF<br>输入数据文件: 文件号=00007 名称=E:\\RMAN.DBF<br>通道 ORA_DISK_1: 正在启动段 1 于 04-8月 -13<br>通道 ORA_DISK_1: 已完成段 1 于 04-8月 -13<br>段句柄=D:\\BACKUP\\ORCL_165.BAK 标记=BACK_DATABASE 注释=NONE<br>通道 ORA_DISK_1: 备份集已完成, 经过时间:00:03:05<br>完成 backup 于 04-8月 -13<br><br><br>启动 Control File and SPFILE Autobackup 于 04-8月 -13<br>段 handle=F:\\RMANBACKUP\\CONTROLFILE\\C-1318810635-20130804-06 comment=NONE<br>完成 Control File and SPFILE Autobackup 于 04-8月 -13<br></p><p><br></p><p><br></p><p>RMAN&gt; <span style="color:#ff0000">list backup;</span><br><br>备份集列表<br>===================<br>BS 关键字 &nbsp;类型 LV 大小 &nbsp; &nbsp; &nbsp; 设备类型 经过时间 完成时间<br>------- ---- -- ---------- ----------- ------------ ----------<br>2850 &nbsp; &nbsp;Full &nbsp; &nbsp;5.85M &nbsp; &nbsp; &nbsp;DISK &nbsp; &nbsp; &nbsp; &nbsp;00:00:02 &nbsp; &nbsp; 04-8月 -13<br>&nbsp; &nbsp; &nbsp; &nbsp; BP 关键字: 2854 &nbsp; 状态: AVAILABLE &nbsp;已压缩: NO &nbsp;标记: TAG20130804T113826<br>段名:D:\\BACKUP\\ORCL_159.BAK<br>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color:#ff0000">保留: BACKUP_LOGS &nbsp; &nbsp; &nbsp; &nbsp;直到: FOREVER</span><br>&nbsp; 备份集 2850 中的数据文件列表<br>&nbsp; 文件 LV 类型 Ckp SCN &nbsp; &nbsp;Ckp 时间 &nbsp; 名称<br>&nbsp; ---- -- ---- ---------- ---------- ----<br>&nbsp; 6 &nbsp; &nbsp; &nbsp; Full 33821001663 04-8月 -13 E:\\RM_TAB.DBF<br><br><br>BS 关键字 &nbsp;类型 LV 大小 &nbsp; &nbsp; &nbsp; 设备类型 经过时间 完成时间<br>------- ---- -- ---------- ----------- ------------ ----------<br>2851 &nbsp; &nbsp;Full &nbsp; &nbsp;9.55M &nbsp; &nbsp; &nbsp;DISK &nbsp; &nbsp; &nbsp; &nbsp;00:00:03 &nbsp; &nbsp; 04-8月 -13<br>&nbsp; &nbsp; &nbsp; &nbsp; BP 关键字: 2855 &nbsp; 状态: AVAILABLE &nbsp;已压缩: NO &nbsp;标记: TAG20130804T113830<br>段名:F:\\RMANBACKUP\\CONTROLFILE\\C-1318810635-20130804-03<br>&nbsp; 包含的 SPFILE: 修改时间: 04-8月 -13<br>&nbsp; 包括的控制文件: Ckp SCN: 33821001682 &nbsp; Ckp 时间: 04-8月 -13<br><br>BS 关键字 &nbsp;类型 LV 大小 &nbsp; &nbsp; &nbsp; 设备类型 经过时间 完成时间<br>------- ---- -- ---------- ----------- ------------ ----------<br>3156 &nbsp; &nbsp;Full &nbsp; &nbsp;1.53G &nbsp; &nbsp; &nbsp;DISK &nbsp; &nbsp; &nbsp; &nbsp;00:02:56 &nbsp; &nbsp; 04-8月 -13<br>&nbsp; &nbsp; &nbsp; &nbsp; BP 关键字: 3159 &nbsp; 状态: AVAILABLE &nbsp;已压缩: NO &nbsp;标记: BACK_DATABASE<br>段名:D:\\BACKUP\\ORCL_165.BAK<br>&nbsp; 备份集 3156 中的数据文件列表<br>&nbsp; 文件 LV 类型 Ckp SCN &nbsp; &nbsp;Ckp 时间 &nbsp; 名称<br>&nbsp; ---- -- ---- ---------- ---------- ----<br>&nbsp; 1 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\SYSTEM01.DBF<br>&nbsp; 2 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\UNDOTBS01.DBF<br>&nbsp; 3 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\SYSAUX01.DBF<br>&nbsp; 4 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\USERS01.DBF<br>&nbsp; 5 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\EXAMPLE01.DBF<br>&nbsp; 6 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\RM_TAB.DBF<br>&nbsp; 7 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\RMAN.DBF<br><br></p><p><span style="color:#3333ff">然后在不用catalog的情况操作（其实这里只是想试一下，看看在不用catalog的情况下操作后，在catalog里是否已经更新）</span></p><p>C:\\Documents and Settings\\Administrator&gt;<span style="color:#ff0000">rman target /</span><br>恢复管理器: Release 11.2.0.1.0 - Production on 星期日 8月 4 12:24:17 2013<br>Copyright (c) 1982, 2009, Oracle and/or its affiliates. &nbsp;All rights reserved.<br>连接到目标数据库: ORCL (DBID=1318810635)</p><p><span style="color:#3333ff">因为控制文件中和恢复目录中的备份集对应关系是135-2850，所在在这里免除长期备份的操作用 135</span></p><p>RMAN&gt; <strong><span style="color:#ff0000">change backupset 135 nokeep;</span></strong><br>使用通道 ORA_DISK_1<br>备份的保留属性被删除<br>备份集关键字=135 RECID=135 STAMP=822569908<br><br>RMAN&gt; <span style="color:#ff0000">list backup;</span><br><br>备份集列表<br>===================<br>BS 关键字 &nbsp;类型 LV 大小 &nbsp; &nbsp; &nbsp; 设备类型 经过时间 完成时间<br>------- ---- -- ---------- ----------- ------------ ----------<br>135 &nbsp; &nbsp; Full &nbsp; &nbsp;5.85M &nbsp; &nbsp; &nbsp;DISK &nbsp; &nbsp; &nbsp; &nbsp;00:00:02 &nbsp; &nbsp; 04-8月 -13<br>&nbsp; &nbsp; &nbsp; &nbsp; BP 关键字: 134 &nbsp; 状态: AVAILABLE &nbsp;已压缩: NO &nbsp;标记: TAG20130804T113826<br>段名:D:\\BACKUP\\ORCL_159.BAK<br>&nbsp; 备份集 135 中的数据文件列表<br>&nbsp; 文件 LV 类型 Ckp SCN &nbsp; &nbsp;Ckp 时间 &nbsp; 名称<br>&nbsp; ---- -- ---- ---------- ---------- ----<br>&nbsp; 6 &nbsp; &nbsp; &nbsp; Full 33821001663 04-8月 -13 E:\\RM_TAB.DBF<br><br>BS 关键字 &nbsp;类型 LV 大小 &nbsp; &nbsp; &nbsp; 设备类型 经过时间 完成时间<br>------- ---- -- ---------- ----------- ------------ ----------<br>141 &nbsp; &nbsp; Full &nbsp; &nbsp;1.53G &nbsp; &nbsp; &nbsp;DISK &nbsp; &nbsp; &nbsp; &nbsp;00:02:56 &nbsp; &nbsp; 04-8月 -13<br>&nbsp; &nbsp; &nbsp; &nbsp; BP 关键字: 140 &nbsp; 状态: AVAILABLE &nbsp;已压缩: NO &nbsp;标记: BACK_DATABASE<br>段名:D:\\BACKUP\\ORCL_165.BAK<br>&nbsp; 备份集 141 中的数据文件列表<br>&nbsp; 文件 LV 类型 Ckp SCN &nbsp; &nbsp;Ckp 时间 &nbsp; 名称<br>&nbsp; ---- -- ---- ---------- ---------- ----<br>&nbsp; 1 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\SYSTEM01.DBF<br>&nbsp; 2 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\UNDOTBS01.DBF<br>&nbsp; 3 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\SYSAUX01.DBF<br>&nbsp; 4 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\USERS01.DBF<br>&nbsp; 5 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\EXAMPLE01.DBF<br>&nbsp; 6 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\RM_TAB.DBF<br>&nbsp; 7 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\RMAN.DBF<br></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff">经过change...nokeep操作，说明135（在catalog中是2850）已经没有了”</span><span style="color:#ff0000">保留: BACKUP_LOGS &nbsp; &nbsp; &nbsp; &nbsp;直到: FOREVER</span><span style="color:#3366ff">“ 这个信息；</span></span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3366ff">来看看是否已标记为”废弃“</span></span></p><p>RMAN&gt; <span style="color:#ff0000">report obsolete;</span><br><br>使用目标数据库控制文件替代恢复目录<br>RMAN 保留策略将应用于该命令<br>将 RMAN 保留策略设置为冗余 1<br>已废弃的备份和副本报表<br>类型 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 关键字 完成时间 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 文件名/句柄<br>-------------------- ------ ------------------ --------------------<br>备份集 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 135 &nbsp; &nbsp;04-8月 -13<br>备份片段 &nbsp; &nbsp; &nbsp; 134 &nbsp; &nbsp;04-8月 -13 &nbsp; &nbsp; &nbsp; &nbsp; D:\\BACKUP\\ORCL_159.BAK</p><p><br></p><p><span style="color:#3333ff">OK ，已经标记为废弃备份集；这个时候我们到catalog下看看什么情况：</span></p><p><br></p><p>RMAN&gt;<span style="color:#ff0000"> list backup;</span><br><br>备份集列表<br>===================<br>BS 关键字 &nbsp;类型 LV 大小 &nbsp; &nbsp; &nbsp; 设备类型 经过时间 完成时间<br>------- ---- -- ---------- ----------- ------------ ----------<br>2850 &nbsp; &nbsp;Full &nbsp; &nbsp;5.85M &nbsp; &nbsp; &nbsp;DISK &nbsp; &nbsp; &nbsp; &nbsp;00:00:02 &nbsp; &nbsp; 04-8月 -13<br>&nbsp; &nbsp; &nbsp; &nbsp; BP 关键字: 2854 &nbsp; 状态: AVAILABLE &nbsp;已压缩: NO &nbsp;标记: TAG20130804T113826<br>段名:D:\\BACKUP\\ORCL_159.BAK<br>&nbsp; 备份集 2850 中的数据文件列表<br>&nbsp; 文件 LV 类型 Ckp SCN &nbsp; &nbsp;Ckp 时间 &nbsp; 名称<br>&nbsp; ---- -- ---- ---------- ---------- ----<br>&nbsp; 6 &nbsp; &nbsp; &nbsp; Full 33821001663 04-8月 -13 E:\\RM_TAB.DBF<br><br><br>BS 关键字 &nbsp;类型 LV 大小 &nbsp; &nbsp; &nbsp; 设备类型 经过时间 完成时间<br>------- ---- -- ---------- ----------- ------------ ----------<br>3156 &nbsp; &nbsp;Full &nbsp; &nbsp;1.53G &nbsp; &nbsp; &nbsp;DISK &nbsp; &nbsp; &nbsp; &nbsp;00:02:56 &nbsp; &nbsp; 04-8月 -13<br>&nbsp; &nbsp; &nbsp; &nbsp; BP 关键字: 3159 &nbsp; 状态: AVAILABLE &nbsp;已压缩: NO &nbsp;标记: BACK_DATABASE<br>段名:D:\\BACKUP\\ORCL_165.BAK<br>&nbsp; 备份集 3156 中的数据文件列表<br>&nbsp; 文件 LV 类型 Ckp SCN &nbsp; &nbsp;Ckp 时间 &nbsp; 名称<br>&nbsp; ---- -- ---- ---------- ---------- ----<br>&nbsp; 1 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\SYSTEM01.DBF<br>&nbsp; 2 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\UNDOTBS01.DBF<br>&nbsp; 3 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\SYSAUX01.DBF<br>&nbsp; 4 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\USERS01.DBF<br>&nbsp; 5 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\EXAMPLE01.DBF<br>&nbsp; 6 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\RM_TAB.DBF<br>&nbsp; 7 &nbsp; &nbsp; &nbsp; Full 33821002940 04-8月 -13 E:\\RMAN.DBF<br><br><br>RMAN&gt; <span style="color:#ff0000">report obsolete;</span><br><br><br>RMAN 保留策略将应用于该命令<br>将 RMAN 保留策略设置为冗余 1<br>已废弃的备份和副本报表<br>类型 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 关键字 完成时间 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 文件名/句柄<br>-------------------- ------ ------------------ --------------------<br>备份集 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2850 &nbsp; 04-8月 -13<br>备份片段 &nbsp; &nbsp; &nbsp; 2854 &nbsp; 04-8月 -13 &nbsp; &nbsp; &nbsp; &nbsp; D:\\BACKUP\\ORCL_159.BAK<br></p><p><br></p><p><span style="color:#3366ff">说明跟无catalog里保持了同步，既然那么及时，那么我是不是有一个类&#20284;于”触发器“的东西在同步控制文件和恢复目录之间的信息呢？其实是当执行某些特定的操作例如backup 、delete等操作的时候，内部机制会去自动同步；</span></p><p><span style="color:#3366ff"><br></span></p><p><span style="color:#3366ff">有一道ocp题考查此知识点</span></p><p></p><p>Q513. You performed the RMAN database backup having abackupset key number 231 with the KEEP FOREVER option. After some days, youwant to change the status of the database backup and you issued the followingcommand:</p><p><br></p><p>RMAN&gt;CHANGE BACKUPSET 231 NOKEEP;</p><p><br></p><p>What is the implication of this command?</p><p>A. The backup is deleted.</p><p>B. The backup is marked unavailable.</p><p>C. The backup overrides the backup retention policy.</p><p>D. the backup becomes eligible &nbsp;fordeletion according to the existing retention policy</p><p>&nbsp;</p><p>Answer: D</p><br><p><span style="color:#3366ff"><br></span></p><p></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">-----------------------------------------------------------------------------------------------------------------------</p><p style="color:rgb(51,102,255); margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:red">博文所有内容均属原创，文章允许转载，但必须以链接方式注明源地址，否则追究法律责任</span><span style="color:red">!</span></p><p style="color:rgb(51,102,255); margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:red">Blog:&nbsp;&nbsp;&nbsp;&nbsp;http://blog.csdn.net/perfect_db</span></p><p style="color:rgb(51,102,255); margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:red">Email: &nbsp;&nbsp;</span><a href="mailto:tianlesoftware@gmail.com" style="color:rgb(202,0,0); text-decoration:none"><span style="color:red">p</span></a><span style="color:red">erfect_db@sina.com</span></p><p style="color:rgb(51,102,255); margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:red">&nbsp; &nbsp;QQ: &nbsp; 787266309</span></p><br>            <div>                作者：xuelanggongwu 发表于2013-8-4 12:42:06 <a href="http://blog.csdn.net/perfect_db/article/details/9745909">原文链接</a>            </div>            <div>            阅读：284 评论：3 <a href="http://blog.csdn.net/perfect_db/article/details/9745909#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]ORA-02097、ORA-00837（修改memory_target时碰到的一个小问题）；]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9729983</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9729983</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-3 10:18:56</pubDate>
			
			<description><![CDATA[            <p><span style="color:#3333ff">今天看到一ocp的题有点疑问，就做了个小实验，碰到了ORA-02097、ORA-00837两个错误；</span></p><p><span style="color:#3333ff">题如下：</span></p><p></p><p><span style="color:#3333ff">Q484. You set the following parameters in the parameter fileand restarted the database:</span></p><p>MEMORY_MAX_TARGET=0</p><p>MEMORY_TARGET=500M</p><p>PGA_AGGREGATE_TARGET=90M</p><p>SGA_TARGET=270M</p><p style="color:rgb(51,51,255)">Which two statements are true regarding these parameters afterthe database instance is restarted? (Choose two.)</p><p>A. The MEMORY_MAX_TARGET parameter is automatically set to500 MB.</p><p>B. The value of the MEMORY_MAX_TARGET parameter remains zerotill it is changed manually.</p><p>C. The PGA_AGGREGATE_TARGET and SGA_TARGET parameters areautomatically set to zero.</p><p>D. The lower bounds of PGA_AGGREGATE_TARGET and SGA_TARGETparameters are set to 90 MB and 270 MB, respectively.</p><p style="color:rgb(51,51,255)">Answer: A,D</p>我以为应该B正确而不是A；经过实验，答案却是没问题；<p><br></p><p><span style="color:#3333ff">实验过程</span></p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3333ff">Microsoft Windows XP</span></span> [版本 5.1.2600]<br>(C) 版权所有 1985-2001 Microsoft Corp.<br>C:\\Documents and Settings\\Administrator&gt;<span style="color:#ff0000">sqlplus / as sysdba</span><br>SQL*Plus: Release 11.2.0.1.0 Production on 星期六 8月 3 09:54:47 2013<br>Copyright (c) 1982, 2010, Oracle. &nbsp;All rights reserved.<br><br>连接到:<br><span style="color:#3333ff">Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production</span><br>With the Partitioning, OLAP, Data Mining and Real Application Testing options<br><br>SQL&gt; <span style="color:#ff0000">show parameter mem</span></p><p><br>NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TYPE &nbsp; &nbsp; &nbsp; &nbsp;VALUE<br>------------------------------------ ----------- ------------------------------<br>hi_shared_memory_address &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; integer &nbsp; &nbsp; 0<br><strong>memory_max_target &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;big integer 0<br>memory_target &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;big integer 0</strong><br>shared_memory_address &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;integer &nbsp; &nbsp; 0</p><p><br>SQL&gt; <span style="color:#ff0000">show parameter pga</span><br><br><br>NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TYPE &nbsp; &nbsp; &nbsp; &nbsp;VALUE<br>------------------------------------ ----------- ------------------------------<br><strong>pga_aggregate_target &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; big integer 194M</strong></p><p><br>SQL&gt; <span style="color:#ff0000">show parameter sga</span><br><br>NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TYPE &nbsp; &nbsp; &nbsp; &nbsp;VALUE<br>------------------------------------ ----------- ------------------------------<br>lock_sga &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; boolean &nbsp; &nbsp; FALSE<br>pre_page_sga &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; boolean &nbsp; &nbsp; FALSE<br>sga_max_size &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; big integer 800M<br><strong>sga_target &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; big integer 700M</strong></p><p><br></p><p><span style="color:#3333ff">出现错误的地方：</span></p><p>SQL&gt; <span style="color:#ff0000">alter system set memory_target=900M </span><span style="color:#3333ff">scope=both</span><span style="color:#ff0000">;</span><br>alter system set memory_target=900M scope=both<br>*<br>第 1 行出现错误:<br><strong><span style="color:#ff0000">ORA-02097: </span></strong>无法修改参数, 因为指定的&#20540;无效<br><span style="color:#ff0000"><strong>ORA-00837:</strong></span> 指定的&#20540; MEMORY_TARGET 大于 MEMORY_MAX_TARGET<br><br><br><span style="color:#3333ff">既然不能对现有的&#20540;做调整，那就改用重启后生效的策略</span></p><p>SQL&gt; <span style="color:#ff0000">alter system set memory_target=900M </span><span style="color:#3333ff">scope=spfile</span><span style="color:#ff0000">;</span><br><br>系统已更改。<br><br><span style="color:#3333ff">看来，这样是可以的，在重启前建议先创建一个pfile,以免启动不起来时能够手工调整<br></span>SQL&gt; <span style="color:#ff0000">create pfile='d:\\pfile_t.ora' from spfile;</span><br><br>文件已创建。<br><br>SQL&gt; <span style="color:#ff0000">shutdown immediate;</span><br>数据库已经关闭。<br>已经卸载数据库。<br>ORACLE 例程已经关闭。<br>SQL&gt; startup<br>ORACLE 例程已经启动。<br><br>Total System Global Area &nbsp;836976640 bytes<br>Fixed Size &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1377812 bytes<br>Variable Size &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 683674092 bytes<br>Database Buffers &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;146800640 bytes<br>Redo Buffers &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5124096 bytes<br>数据库装载完毕。<br>数据库已经打开。</p><p><span style="color:#3333ff">看来是修改成功了，接下来看看出现了什么情况</span></p><p><br>SQL&gt; <span style="color:#ff0000">show parameter mem</span><br><br>NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TYPE &nbsp; &nbsp; &nbsp; &nbsp;VALUE<br>------------------------------------ ----------- ------------------------------<br>hi_shared_memory_address &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; integer &nbsp; &nbsp; 0<br><strong>memory_max_target &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;big integer 900M<br>memory_target &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;big integer 900M</strong><br>shared_memory_address &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;integer &nbsp; &nbsp; 0</p><p><span style="color:rgb(51,51,255)">memory_max_target 已经被自动调整到900M</span><br></p><p><br>SQL&gt; <span style="color:#ff0000">show parameter pga</span><br>NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TYPE &nbsp; &nbsp; &nbsp; &nbsp;VALUE<br>------------------------------------ ----------- ------------------------------<br>pga_aggregate_target &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; big integer 194M</p><p><br>SQL&gt; <span style="color:#ff0000">show parameter sga</span><br>NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TYPE &nbsp; &nbsp; &nbsp; &nbsp;VALUE<br>------------------------------------ ----------- ------------------------------<br>lock_sga &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; boolean &nbsp; &nbsp; FALSE<br>pre_page_sga &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; boolean &nbsp; &nbsp; FALSE<br>sga_max_size &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; big integer 800M<br>sga_target &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; big integer 700M<br><br><span style="color:#3333ff">pga_aggregate_target &nbsp;和&nbsp;sga_target &nbsp;保持不变</span><br><br><br></p><p><br></p><p></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">-----------------------------------------------------------------------------------------------------------------------</p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:red">博文所有内容均属原创，文章允许转载，但必须以链接方式注明源地址，否则追究法律责任</span><span style="color:red">!</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:red">Blog:&nbsp;&nbsp;&nbsp;&nbsp;http://blog.csdn.net/perfect_db</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:red">Email: &nbsp;&nbsp;</span><a href="mailto:tianlesoftware@gmail.com" style="color:rgb(202,0,0); text-decoration:none"><span style="color:red">p</span></a><span style="color:red">erfect_db@sina.com</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:red">&nbsp; &nbsp;QQ: &nbsp; 787266309</span></p><br>            <div>                作者：xuelanggongwu 发表于2013-8-3 10:18:56 <a href="http://blog.csdn.net/perfect_db/article/details/9729983">原文链接</a>            </div>            <div>            阅读：210 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/9729983#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]kettle 开发总结]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9715481</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9715481</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-2 12:46:11</pubDate>
			
			<description><![CDATA[            <div><p>1.&nbsp;<a href="http://blog.csdn.net/perfect_db/article/details/7850331">http://blog.csdn.net/perfect_db/article/details/7850331</a></p><p>2.在用file exists 控件的时候，当用到“文本文件输入”时，文本文件中需要一定的&#26684;式，类&#20284;下图：</p><p><img src="http://img.blog.csdn.net/20130802123704109?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></p><p align="left"></p><p>第一行是标题，下面的都是路径和文件名，之后作为源链接到 fileexists里，其中的filename fild 选择“文件路径”，然后可以把文件是否存在的结果输出到一个excel文件中或相应的表中；当输入到表中的时候有一个选项是“裁剪表”，如果选中，每次插入到表中数据的时候会执行一个truncate动作，否则就是追加数据；另外当输入到表中的时候，在相应的数据库中可以不创建相应的表，这个时候只用在插入表名的地方输入表名，然后选择“SQL”按钮，里面会出现创建表的语法，执行创建，然后可以清楚相应的缓存。<img src="http://img.blog.csdn.net/20130802123903656?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="">；当然也可以已经创建了相应的表，然后直接按“确定”按钮就行，如果相应的表和输入的列数及列属性不一样时，也可以在sql按钮的语句中取修改。</p><p>在使用file exists时，输入也可以用表输入。相应地table exists的用法与此一样；</p><p>3.当需要事实表关联维度表时，可以用“数据库查询”控件，举例：表输入，用数据库查询，返回某个代码的名称，然后输出（表输出或文件输）；</p><p>&nbsp;<img src="http://img.blog.csdn.net/20130802123953171?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p><p align="left"><img src="http://img.blog.csdn.net/20130802124021671?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p><p align="left">&nbsp;</p><p align="left">调用 DB 存储过程 </p><p align="left"></p><p align="left">&nbsp;<img src="http://img.blog.csdn.net/20130802124044281?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p><p align="left"><img src="http://img.blog.csdn.net/20130802124102281?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></p><p align="left">返回&#20540;是指存储过程中 return 的&#20540;，若是一个返回&#20540;用上面的，若是有多个，用下面的参数表&#26684;中填写。 </p></div><p><br clear="all"></p><p><br></p><p align="left">Kettle 发送邮件的问题</p><p align="left">用kettle发送邮件要使用job的mail功能。<br></p><p align="left">&nbsp;<img src="http://img.blog.csdn.net/20130802124138687?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p><p align="left"></p><p align="left">&nbsp;<img src="http://img.blog.csdn.net/20130802124153406?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p><p align="left"></p><p align="left">&nbsp;<img src="http://img.blog.csdn.net/20130802124235453?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p><p align="left"><img src="http://img.blog.csdn.net/20130802124250656?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></p><p align="left"></p><p align="left"></p><p align="left">&nbsp;<img src="http://img.blog.csdn.net/20130802124319765?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p><p align="left"></p><p align="left">&nbsp;</p><p align="left">下面举个例子说明：（定时查看日志文件，如果有信息那么发邮件给用户）</p><p align="left"><img src="http://img.blog.csdn.net/20130802124345671?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p><p align="left">&nbsp;</p><p align="left">写.bat文件调用此job</p><p align="left">&nbsp;<img src="http://img.blog.csdn.net/20130802124402421?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p><p align="left"><br></p><p align="left">Linux (call_mail.sh)</p><p align="left">Cd&nbsp;/oracle/kettle-4.2</p><p align="left">./kitchen.sh –file=/home/mail.kjb</p><p align="left">&nbsp;<img src="http://img.blog.csdn.net/20130802124420296?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGVyZmVjdF9kYg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p><p align="left"><br></p><p align="left"></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">-----------------------------------------------------------------------------------------------------------------------</p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:red">博文所有内容均属原创，文章允许转载，但必须以链接方式注明源地址，否则追究法律责任</span><span style="color:red">!</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:red">Blog:&nbsp;&nbsp;&nbsp;&nbsp;http://blog.csdn.net/perfect_db</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:red">Email: &nbsp;&nbsp;</span><a href="mailto:tianlesoftware@gmail.com" style="color:rgb(202,0,0); text-decoration:none"><span style="color:red">p</span></a><span style="color:red">erfect_db@sina.com</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:red">&nbsp; &nbsp;QQ: &nbsp; 787266309</span></p><br>            <div>                作者：xuelanggongwu 发表于2013-8-2 12:46:11 <a href="http://blog.csdn.net/perfect_db/article/details/9715481">原文链接</a>            </div>            <div>            阅读：184 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/9715481#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]oracle数据库升级记(记一次10.2.0.3版本升级到11.2.0.1版本的过程)]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9674885</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9674885</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-8-1 0:30:33</pubDate>
			
			<description><![CDATA[            <p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:9.5pt; line-height:17.65pt"><span style="color:#3333ff">先交代一下背景：</span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:9.5pt">操作系统：</span><span lang="EN-US" style="font-size:9.5pt; font-family:Arial,sans-serif">windows xp</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:9.5pt">已有数据库版本：</span><span lang="EN-US" style="font-size:9.5pt; font-family:Arial,sans-serif">10.2.0.3</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:9.5pt">升级目标版本：</span><span lang="EN-US" style="font-size:9.5pt; font-family:Arial,sans-serif">11.2.0.1</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:9.5pt"><span style="color:#3333ff">步骤大纲：</span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:9.5pt">在源操作系统(安装有10.2.0.3数据库的操作系统)上安装</span><span lang="EN-US" style="font-size:9.5pt; font-family:Arial,sans-serif">11.2.0.1</span><span style="font-size:9.5pt">数据库软件，然后借助于</span><span lang="EN-US" style="font-size:9.5pt; font-family:Arial,sans-serif">Database&nbsp;Upgrade Assistant </span><span style="font-size:9.5pt">升级数据库，检测升级后的数据库情况，删除源数据库相关的软件；</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:9.5pt">注：为了更清晰的展示整个过程，本文采用大量截图来说明；</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:9.5pt"><span style="color:#3333ff">具体步骤：</span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">在源操作系统上安装11.2.0.1软件，在安装选项中可以选择“仅安装数据库软件”或“升级现有数据库”；这里选择后者</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801000908890?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801000932171?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801001038328?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801001045375?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801001100015?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">出现了这个问题，感觉很奇怪，因为内存空间完全够用啊，怎么检测通不过呢，经过查找资料这里需要打开磁盘的共享属性：</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"></span></p><p>C:\\Documents andSettings\\Administrator&gt;<span style="color:#ff0000">net share c$=c:</span></p>c$ 共享成功。<br><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">重新进行检测</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801001839453?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">说明已药到病除，接着进行</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801001949671?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">这个时候出现了一个错误，提示找不到OracleMTSRecoveryService的位置，于是就查注册表中该键&#20540;，发现一个问题，解决方案如图</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801002233531?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">接着进行</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801002323046?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801002520328?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801002539718?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801002630781?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801002714734?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">选者“是”</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801002748734?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801002803046?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">这个地方就不移动原来的数据文件，继续放在源位置；</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801002901453?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801002933484?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801003123875?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">上面 两张图是升级前的预览、概要，根据上面的提示，说明如果源数据库没有关闭的话，在升级过程中升级程序会关闭源数据库，再进行升级</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801003341125?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">为了避免升级过程中出错，这里选择了先备份再升级选项，所以上图在升级前有一个备份的操作</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801003514437?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">出现这个错误的原因是我源数据库的sga_target设置为600M，而11.2.0.1要求最低644M ，这个时候当然不能选择“中止”，但是选择“忽略”后，升级程序还是不能进行，这个时候没办法，只能按照它的提示先进行恢复，恢复到10.2.0.3，修改sga_target参数后再进行升级</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801003843937?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">上图是恢复的过程，恢复完成后给出了下图的提示：</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801003957421?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">说明升级失败（已经恢复了，当然升级失败了）；先修改sga_target再说</span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><img src="http://img.blog.csdn.net/20130801004110984?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px">接着用<span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px">Database&nbsp;Upgrade Assistant 进行升级（在dos窗口中输入dbua),步骤如上面一样，这里来看一下升级程序备份源数据库的情况</span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><img src="http://img.blog.csdn.net/20130801004320328?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px">红色框着的部分是第一次升级时备份，绿色框着的部分是第二次也就是修改过sga_target后备份的情况，其中有三个文件重叠了，也就是说进行了覆盖；如果空间不够的话可以把红色框着的部分删除；&nbsp;</span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px">接着向下进行</span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><img src="http://img.blog.csdn.net/20130801004548703?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><img src="http://img.blog.csdn.net/20130801004614921?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><img src="http://img.blog.csdn.net/20130801004629609?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><img src="http://img.blog.csdn.net/20130801004647078?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px">上面 三张图显示的是升级完成后的概要，提示数据库已经升级成功，并准备就绪（已启动），可以使用了，单击关闭按钮，这个时候，在刚才dos窗口中会有这样的提示：</span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><img src="http://img.blog.csdn.net/20130801004900406?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px">给出了升级后的重大性能更改，详细信息可以查看该路径下的这份文档；</span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><span style="color:#ff0000">接下来检查数据库情况（还在修改sga_target那个窗口，这样可以做个对比）：</span></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><img src="http://img.blog.csdn.net/20130801005048250?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><span style="color:#ff0000">OK ，其实到了这里说明数据库已经完成了升级，可以正常使用了； 那么源数据现在什么情况呢，经检查，发现源数据的服务、路径、相应文件均存在，其实已经没有存在的必要了，那么就删除</span></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><span style="color:#ff0000"><img src="http://img.blog.csdn.net/20130801005427484?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><br></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px">好了，本次升级宣告结束； 欢迎大家评论、指正；</span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><br></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><br></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"><br></span></span></p><p style="margin:0cm 0cm 0.0001pt; line-height:17.65pt"><span style="font-size:12px"><span style="font-family:Arial,sans-serif; font-size:13px; line-height:23.53125px"></span></span></p><p>-----------------------------------------------------------------------------------------------------------------------</p><p><span style="color:red">博文所有内容均属原创，文章允许转载，但必须以链接方式注明源地址，否则追究法律责任</span><span style="color:red">!</span></p><p><span style="color:red">Blog:&nbsp;&nbsp;&nbsp;&nbsp;http://blog.csdn.net/xuelanggongwu</span></p><p><span style="color:red">Email: &nbsp;&nbsp;</span><a href="mailto:tianlesoftware@gmail.com"><span style="color:red">p</span></a><span style="color:red">erfect_db@sina.com</span></p><p><span style="color:red">&nbsp; &nbsp;QQ: &nbsp; 787266309</span></p><br>            <div>                作者：xuelanggongwu 发表于2013-8-1 0:30:33 <a href="http://blog.csdn.net/perfect_db/article/details/9674885">原文链接</a>            </div>            <div>            阅读：649 评论：2 <a href="http://blog.csdn.net/perfect_db/article/details/9674885#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]oracle数据库迁移]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9632891</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9632891</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-7-30 21:11:40</pubDate>
			
			<description><![CDATA[            <p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"></p><p><span style="color:#3333ff">同版本数据库，同操作系统数据库的迁移；</span></p><p>迁移思路是，在目标操作系统上，按照源数据库的$ORACLE_BASE来安装一个数据库软件，然后拷贝相应的源数据库的数据文件、密码文件、spfile文件、相应dump的文件夹到迁移的库上来完成迁移；</p><p><br></p><p>步骤如下:</p><p>首先查看源数据的相应信息，为迁移做准备；</p><p>源数据库：</p><p>SQL&gt; <span style="color:#ff0000">select * from v$version;</span></p><p>BANNER</p><p>----------------------------------------------------------------</p><p>Oracle Database 10g Enterprise EditionRelease 10.2.0.3.0 - Prod</p><p>PL/SQL Release 10.2.0.3.0 - Production</p><p>CORE&nbsp;&nbsp;&nbsp;10.2.0.3.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Production</p><p>TNS for 32-bit Windows: Version 10.2.0.3.0- Production</p><p>NLSRTL Version 10.2.0.3.0 – Production</p><p>SQL&gt; <span style="color:#ff0000">select file_name,file_id,tablespace_name&nbsp; from dba_data_files;</span></p><p>FILE_NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FILE_ID TABLESPACE_NAME</p><p>---------------------------------------------------------------------- ------------------------------</p><p>E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\USERS01.DBF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4 USERS</p><p>E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\SYSAUX01.DBF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 SYSAUX</p><p>E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\UNDOTBS01.DBF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 UNDOTBS1</p><p>E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\SYSTEM01.DBF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 SYSTEM</p><p>E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\EXAMPLE01.DBF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5 EXAMPLE</p><p>E:\\RM_TAB.DBF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6 RM_TABLESPACE</p><p>E:\\RMAN.DBF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7 RMAN_TAB</p><p>&nbsp;</p><p>已选择7行。</p><p>&nbsp;</p><p>SQL&gt; <span style="color:#ff0000">show parameter spfile</span></p><p>NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TYPE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VALUE</p><p>----------------------------------------------- ------------------------------</p><p>spfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; E:\\ORACLE\\PRODUCT\\10.2.0\\DB_1\\</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DATABASE\\SPFILEORCL.ORA</p><p><br></p><p>然后在目标操作系统上创建数据库软件，<span style="color:#ff0000">注意，只安装数据库软件；</span></p><p>安装完成后，按照思路中说的，把相应的文件拷贝到迁移库的相应目录；</p><p>在迁移库上操作：</p><p>Microsoft Windows XP [版本 5.1.2600]</p><p>(C) 版权所有 1985-2001Microsoft Corp.</p><p>C:\\Documents and Settings\\xuniji&gt;sqlplus/ as sysdba</p><p>SQL*Plus: Release 10.2.0.3.0 - Productionon 星期一 7月 29 17:59:34 2013</p><p>Copyright (c) 1982, 2006, Oracle.&nbsp; All Rights Reserved.</p><p>ERROR:</p><p>ORA-12560: TNS: 协议适配器错误</p><p>请输入用户名:</p><p>ERROR:</p><p>ORA-12560: TNS: 协议适配器错误</p><p>请输入用户名:</p><p>ERROR:</p><p>ORA-12560: TNS: 协议适配器错误</p><p>SP2-0157: 在 3 次尝试之后无法连接到ORACLE, 退出 SQL*Plus</p><p>&nbsp;</p><p><span style="background-color:rgb(255,255,255)"><span style="color:#3333ff">在迁移库上只是安装了数据库软件，这个时候没有oracle 服务，所以用oradim来创建一个与源数据相同的oracle 服务；</span></span></p><p>&nbsp;</p><p>C:\\Documents and Settings\\xuniji&gt;<span style="color:#ff0000">oradim-new -sid orcl</span></p><p>实例已创建。</p><p>查看是否创建成功</p><p>C:\\Documents and Settings\\xuniji&gt;<span style="color:#ff0000">netstart</span></p><p>已经启动以下 Windows 服务:</p><p>&nbsp;&nbsp;Application Layer Gateway Service</p><p>&nbsp;&nbsp;Automatic Updates</p><p>&nbsp;&nbsp;COM&#43; Event System</p><p>&nbsp;&nbsp;Computer Browser</p><p>&nbsp;&nbsp;Cryptographic Services</p><p>&nbsp;&nbsp;DCOM Server Process Launcher</p><p>&nbsp;&nbsp;DHCP Client</p><p>&nbsp;&nbsp;Distributed Link Tracking Client</p><p>&nbsp;&nbsp;DNS Client</p><p>&nbsp;&nbsp;Error Reporting Service</p><p>&nbsp;&nbsp;Event Log</p><p>&nbsp;&nbsp;Fast User Switching Compatibility</p><p>&nbsp;&nbsp;Help and Support</p><p>&nbsp;&nbsp;IPSEC Services</p><p>&nbsp;&nbsp;Logical Disk Manager</p><p>&nbsp;&nbsp;Network Connections</p><p>&nbsp;&nbsp;Network Location Awareness (NLA)</p><p>&nbsp;&nbsp; <span style="color:red">OracleServiceorcl</span></p><p>&nbsp;&nbsp;Plug and Play</p><p>&nbsp;&nbsp;Print Spooler</p><p>&nbsp;&nbsp; ……</p><p>&nbsp;&nbsp; ……</p><p>&nbsp;&nbsp; ……</p><p>&nbsp;</p><p><span style="color:#3333ff">再来登录</span></p><p>C:\\Documents and Settings\\xuniji&gt;<span style="color:#ff0000">sqlplus/ as sysdba</span></p><p>SQL*Plus: Release 10.2.0.3.0 - Productionon 星期一 7月 29 19:25:13 2013</p><p>Copyright (c) 1982, 2006, Oracle.&nbsp; All Rights Reserved.</p><p>已连接到空闲例程。</p><p>&nbsp;</p><p>SQL&gt; <span style="color:#ff0000">startup nomount;</span></p><p>ORACLE 例程已经启动。</p><p>Total System Global Area&nbsp; 838860800 bytes</p><p>Fixed Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1293384 bytes</p><p>Variable Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 729809848 bytes</p><p>Database Buffers&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 104857600 bytes</p><p>Redo Buffers&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2899968 bytes</p><p>SQL&gt; <span style="color:#ff0000">alter database mount;</span></p><p>数据库已更改。</p><p>&nbsp;</p><p>SQL&gt; <span style="color:#ff0000">alter database open;</span></p><p>数据库已更改。</p><p>&nbsp;</p><p>来验证一下是否是源库信息：</p><p>SQL&gt; <span style="color:#ff0000">select * from v$version;</span></p><p>BANNER</p><p>----------------------------------------------------------------</p><p>Oracle Database 10g Enterprise EditionRelease 10.2.0.3.0 - Prod</p><p>PL/SQL Release 10.2.0.3.0 - Production</p><p>CORE&nbsp;&nbsp;&nbsp;10.2.0.3.0&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;Production</p><p>TNS for 32-bit Windows: Version 10.2.0.3.0- Production</p><p>NLSRTL Version 10.2.0.3.0 - Production</p><p>&nbsp;</p><p>SQL&gt; <span style="color:#ff0000">set line 170</span></p><p>SQL&gt; <span style="color:#ff0000">select * from scott.emp;</span></p><p>&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;EMPNO ENAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JOB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MGR HIREDATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SAL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMM&nbsp;&nbsp;&nbsp;&nbsp;DEPTNO</p><p>---------- ---------- --------- ------------------------ ---------- ---------- ----------</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7369 SMITH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CLERK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7902 17-12? -80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7499 ALLEN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SALESMAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7698 20-2?&nbsp; -81&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 300&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 30</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7521 WARD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SALESMAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7698 22-2?&nbsp; -81&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1250&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 30</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7566 JONES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MANAGER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7839 02-4?&nbsp; -81&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2975&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7654 MARTIN&nbsp;&nbsp;&nbsp;&nbsp; SALESMAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7698 28-9?&nbsp; -81&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1250&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1400&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 30</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7698 BLAKE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MANAGER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7839 01-5?&nbsp; -81&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2850&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 30</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7839 KING&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PRESIDENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 17-11? -81&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7844 TURNER&nbsp;&nbsp;&nbsp;&nbsp; SALESMAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7698 08-9?&nbsp; -81&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 30</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7900 JAMES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CLERK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7698 03-12? -81&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 950&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 30</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7902 FORD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ANALYST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7566 03-12? -81&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7934 MILLER&nbsp;&nbsp;&nbsp;&nbsp; CLERK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7782 23-1?&nbsp; -82&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1300&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</p><p>&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;EMPNO ENAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JOB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MGR HIREDATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SAL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMM&nbsp;&nbsp;&nbsp;&nbsp;DEPTNO</p><p>---------- ---------- --------- ------------------------ ---------- ---------- ----------</p><p>&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:red">&nbsp;7901 YJG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20</span></p><p>&nbsp;</p><p>已选择12行。</p><p>&nbsp;</p><p>SQL&gt; <span style="color:#ff0000">select tablespace_name fromdba_tablespaces;</span></p><p>&nbsp;</p><p>TABLESPACE_NAME</p><p>------------------------------</p><p>SYSTEM</p><p>UNDOTBS1</p><p>SYSAUX</p><p>TEMP</p><p>USERS</p><p>EXAMPLE</p><p><span style="color:red">RMAN_TAB</span></p><p><span style="color:red">RM_TABLESPACE</span></p><p>&nbsp;</p><p>已选择8行。</p><p>&nbsp;</p><p><span style="color:red">OK</span><span style="color:red">，说明是源库信息；</span></p><p><span style="color:red">&nbsp;</span></p><p><span style="color:red">这个时候如果远程链接该数据库，因为没有监听的原因，会提示“</span><span style="color:red">ora-12154</span><span style="color:red">无法解析指定的链接标示符”；</span></p><p><span style="color:red">用</span><span style="color:red">Net ConfigurationAssistant</span><span style="color:red">来配置监听即可；自此迁移完成；</span></p><p><span style="color:red">&nbsp;</span></p><p><span style="color:#3366ff">附注alert_orcl.log 中的内容：</span></p><p>&nbsp;</p><p>Mon Jul 29 19:25:23 2013</p><p>ORACLE V10.2.0.3.0 - Production vsnsta=0</p><p>vsnsql=14 vsnxtr=3</p><p>Windows XP Version V5.1 Service Pack 3</p><p>CPU&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1 - type 586, 1 PhysicalCores</p><p>Process Affinity&nbsp;&nbsp;&nbsp; : 0x00000000</p><p>Memory (Avail/Total): Ph:732M/1023M,Ph&#43;PgF:2283M/2462M, VA:1940M/2047M</p><p>Mon Jul 29 19:25:23 2013</p><p>Starting ORACLE instance (normal)</p><p>LICENSE_MAX_SESSION = 0</p><p>LICENSE_SESSIONS_WARNING = 0</p><p>Shared memory segment for instancemonitoring created</p><p>Picked latch-free SCN scheme 2</p><p>Using LOG_ARCHIVE_DEST_10 parameter defaultvalue as USE_DB_RECOVERY_FILE_DEST</p><p>Autotune of undo retention is turned on. </p><p>IMODE=BR</p><p>ILAT =18</p><p>LICENSE_MAX_USERS = 0</p><p>SYS auditing is disabled</p><p>ksdpec: called for event 13740 prior toevent group initialization</p><p>Starting up ORACLE RDBMS Version:10.2.0.3.0.</p><p>System parameters with non-default values:</p><p>&nbsp;processes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 150</p><p>&nbsp;sga_max_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =838860800</p><p>&nbsp;__shared_pool_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =503316480</p><p>&nbsp;shared_pool_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =503316480</p><p>&nbsp;__large_pool_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 4194304</p><p>&nbsp;large_pool_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 4194304</p><p>&nbsp;__java_pool_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 4194304</p><p>&nbsp;java_pool_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 4194304</p><p>&nbsp;__streams_pool_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 4194304</p><p>&nbsp;streams_pool_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 4194304</p><p>&nbsp;sga_target&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =629145600</p><p>&nbsp;control_files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = <span style="color:red">E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\CONTROL01.CTL,E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\CONTROL02.CTL</span></p><p>&nbsp;db_block_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 8192</p><p>&nbsp;__db_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =109051904</p><p>&nbsp;db_cache_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =88080384</p><p>&nbsp;compatible&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =10.2.0.3.0</p><p>&nbsp;db_file_multiblock_read_count= 16</p><p>&nbsp;db_recovery_file_dest&nbsp;&nbsp;&nbsp; = <span style="color:red">F:\\rmanbackup</span></p><p>&nbsp; db_recovery_file_dest_size=3221225472</p><p>&nbsp;fast_start_mttr_target&nbsp;&nbsp; = 90</p><p>&nbsp;undo_management&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = AUTO</p><p>&nbsp;undo_tablespace&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =UNDOTBS1</p><p>&nbsp;remote_login_passwordfile= EXCLUSIVE</p><p>&nbsp;db_domain&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </p><p>&nbsp;dispatchers&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =(PROTOCOL=TCP) (SERVICE=orclXDB)</p><p>&nbsp;utl_file_dir&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = <span style="color:red">e:\\oracle\\logminer</span></p><p>&nbsp;job_queue_processes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 10</p><p>&nbsp; <span style="color:red">audit_file_dest&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= E:\\ORACLE\\PRODUCT\\10.2.0\\ADMIN\\ORCL\\ADUMP</span></p><p><span style="color:red">&nbsp; background_dump_dest&nbsp;&nbsp;&nbsp;&nbsp; =E:\\ORACLE\\PRODUCT\\10.2.0\\ADMIN\\ORCL\\BDUMP</span></p><p><span style="color:red">&nbsp; user_dump_dest&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =E:\\ORACLE\\PRODUCT\\10.2.0\\ADMIN\\ORCL\\UDUMP</span></p><p><span style="color:red">&nbsp; core_dump_dest&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =E:\\ORACLE\\PRODUCT\\10.2.0\\ADMIN\\ORCL\\CDUMP</span></p><p>&nbsp;db_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = orcl</p><p>&nbsp;open_cursors&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 300</p><p>&nbsp;pga_aggregate_target&nbsp;&nbsp;&nbsp;&nbsp; =203423744</p><p>PSP0 started with pid=3, OS id=1392</p><p>PMON started with pid=2, OS id=320</p><p>MMAN started with pid=4, OS id=1744</p><p>DBW0 started with pid=5, OS id=1452</p><p>LGWR started with pid=6, OS id=576</p><p>CKPT started with pid=7, OS id=928</p><p>SMON started with pid=8, OS id=1224</p><p>RECO started with pid=9, OS id=596</p><p>CJQ0 started with pid=10, OS id=1888</p><p>MMON started with pid=11, OS id=1296</p><p>Mon Jul 29 19:25:35 2013</p><p>starting up 1 dispatcher(s) for networkaddress '(ADDRESS=(PARTIAL=YES)(PROTOCOL=TCP))'...</p><p>MMNL started with pid=12, OS id=1184</p><p>Mon Jul 29 19:25:35 2013</p><p>starting up 1 shared server(s) ...</p><p>Mon Jul 29 19:25:51 2013</p><p>alter database mount</p><p>Mon Jul 29 19:25:55 2013</p><p>Setting recovery target incarnation to 3</p><p>Mon Jul 29 19:25:55 2013</p><p>Successful mount of redo thread 1, withmount id 1349813183</p><p>Mon Jul 29 19:25:55 2013</p><p>Database mounted in Exclusive Mode</p><p>Completed: alter database mount</p><p>Mon Jul 29 19:26:04 2013</p><p>alter database open</p><p>Mon Jul 29 19:26:05 2013</p><p>Thread 1 opened at log sequence 60</p><p>&nbsp;Current log# 2 seq# 60 mem# 0: E:\\ORACLE\\PRODUCT\\10.2.0\\ORADATA\\ORCL\\REDO02.LOG</p><p>Successful open of redo thread 1</p><p>Mon Jul 29 19:26:05 2013</p><p>SMON: enabling cache recovery</p><p>Mon Jul 29 19:26:15 2013</p><p>Successfully onlined Undo Tablespace 1.</p><p>Mon Jul 29 19:26:15 2013</p><p>SMON: enabling tx recovery</p><p>Mon Jul 29 19:26:17 2013</p><p>Database Characterset is ZHS16GBK</p><p>replication_dependency_tracking turned off(no async multimaster replication found)</p><p>Starting background process QMNC</p><p>QMNC started with pid=16, OS id=1800</p><p>Mon Jul 29 19:27:01 2013</p><p>Completed: alter database open</p><p>Mon Jul 29 19:27:09 2013</p><p>db_recovery_file_dest_size of 3072 MB is5.12% used. This is a</p><p>user-specified limit on the amount of spacethat will be used by this</p><p>database for recovery-related files, anddoes not reflect the amount of</p><p>space available in the underlyingfilesystem or ASM diskgroup.</p><p>&nbsp;</p><p><span style="color:#3366ff">文件中的红色字体标示出的应该在启动数据库前有相应的路径和文件（夹）存在，如果没有就要创建；</span></p><br><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px">-------------------------------------------------------------------------------------------------------</p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:rgb(255,0,0)">博文所有内容均属原创，文章允许转载，但必须以链接方式注明源地址，否则追究法律责任!</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:#ff0000">Blog:&nbsp;&nbsp;&nbsp;&nbsp; http://blog.csdn.net/xuelanggongwu</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:#ff0000">Email: &nbsp;&nbsp;<a href="mailto:tianlesoftware@gmail.com" style="text-decoration:none"><span style="color:#ff0000">p</span></a>erfect_db@sina.com</span></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px"><span style="color:#ff0000">&nbsp; &nbsp;QQ: &nbsp; 787266309</span></p>            <div>                作者：xuelanggongwu 发表于2013-7-30 21:11:40 <a href="http://blog.csdn.net/perfect_db/article/details/9632891">原文链接</a>            </div>            <div>            阅读：210 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/9632891#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]rman catalog (rman 恢复目录)]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9617441</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9617441</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-7-29 16:16:59</pubDate>
			
			<description><![CDATA[            <p>受控制文件大小的限制，一般rman需要用rman catalog来管理及存放备份信息；</p><p>这里介绍一下创建rman catalog的步骤：</p><p></p><p>C:\\Documents andSettings\\Administrator&gt;<span style="color:#ff0000">sqlplus / as sysdba</span></p><p>SQL*Plus: Release 10.2.0.3.0 - Productionon 星期日 7月 28 11:19:40 2013</p><p>Copyright (c) 1982, 2006, Oracle.&nbsp; All Rights Reserved.</p><p>连接到:</p><p>Oracle Database 10g Enterprise EditionRelease 10.2.0.3.0 - Production</p><p>With the Partitioning, OLAP and Data Miningoptions</p><p>&nbsp;</p><p><span style="color:#3333ff">首先创建一个恢复目录专用的表空间，不用太大；</span></p><p>SQL&gt; <span style="color:#ff0000">create tablespace rm_tablespace datafile'd:\\rm_tab.dbf' size 20M;</span></p><p>表空间已创建。</p><p><span style="color:#3333ff">&nbsp;创建一个管理恢复目录的专用账户</span></p><p>SQL&gt; <span style="color:#ff0000">create user rm_user identified byrm_user default tablespace rm_tablespace;</span></p><p>用户已创建。</p><p><span style="color:#3333ff">&nbsp;必须赋予下列三个角色</span></p><p>SQL&gt; <span style="color:#ff0000">grant connect,resource,recovery_catalog_ownerto rm_user;</span></p><p>授权成功。</p><p>&nbsp;</p><p><span style="color:#3333ff">以恢复目录角色进入rman</span></p><p>C:\\Documents andSettings\\Administrator&gt;<span style="color:#ff0000">rman catalog rm_user/rm_user</span></p><p>恢复管理器: Release 10.2.0.3.0 - Production on 星期日 7月 28 11:29:082013</p><p>Copyright (c) 1982, 2005, Oracle.&nbsp; All rights reserved.</p><p>连接到恢复目录数据库</p><p>&nbsp;</p><p><span style="color:#3333ff">创建恢复目录</span></p><p>RMAN&gt; <span style="color:#ff0000">create catalog;</span></p><p>恢复目录已创建</p><p>&nbsp;</p><p><span style="color:#3333ff">同时链接目标数据库和恢复目录</span></p><p>C:\\Documents andSettings\\Administrator&gt;<span style="color:#ff0000">rman target system/admin catalog rm_user/rm_user</span></p><p>恢复管理器: Release 10.2.0.3.0 - Production on 星期日 7月 28 11:35:232013</p><p>Copyright (c) 1982, 2005, Oracle.&nbsp; All rights reserved.</p><p>连接到目标数据库: ORCL (DBID=1318810635)</p><p>连接到恢复目录数据库</p><p>&nbsp;</p><p><span style="color:#3333ff">注册目标数据库到恢复目录</span></p><p>RMAN&gt; <span style="color:#3333ff">register database;</span></p><p>注册在恢复目录中的数据库</p><p>正在启动全部恢复目录的 resync</p><p>完成全部 resync</p><p>&nbsp;</p><p>Ok 到此为止恢复目录就创建好了，可以进行rman的各种操作了；</p>            <div>                作者：xuelanggongwu 发表于2013-7-29 16:16:59 <a href="http://blog.csdn.net/perfect_db/article/details/9617441">原文链接</a>            </div>            <div>            阅读：180 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/9617441#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
		<item>
			
			<title><![CDATA[[原]windows下重装ORACLE碰到的几个小问题]]></title>
			
			<link>http://blog.csdn.net/perfect_db/article/details/9616295</link>
			
			<guid>http://blog.csdn.net/perfect_db/article/details/9616295</guid>
			
			<author>xuelanggongwu</author>
			
			<pubDate>2013-7-29 15:15:59</pubDate>
			
			<description><![CDATA[            <p>在一台安装了oracle 10.2.0.3.0 的机器上，先卸载该数据库，然后再安装一个10.2.0.4.0；</p><p>卸载的时候载用dbca命令弹出的安装界面中删除数据库(相当于删除了数据库实例)，如图：</p><p><img src="http://img.blog.csdn.net/20130729150232140?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></p><p>删除完之后，各种数据文件都会被删除，例如：$ORACL_HOME/database/orcl/ 下的所有文件；</p><p><br></p><p><span style="background-color:rgb(255,0,0)">断点1（后续要用到此处，所以在此注释一下）</span></p><p><span style="background-color:rgb(255,0,0)"><br></span></p><p>然后把安装数据库时的相应目录全部删除，如果提示有些再用的话，就重启机器，然后删除；</p><p><span style="color:#ff0000">相应目录不删除的话，oracle在选择主目录的时候会在最后一个子路径里用db_2 而不是默认的db_1;</span></p><p>接下来删除相应的环境变量，右击我的电脑，选择属性，选择“高级”里面的“环境变量”，如图：</p><p><img src="http://img.blog.csdn.net/20130729150655796?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></p><p>最后删除<span lang="EN-US" style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:26px; text-indent:28px">C:/Program Files/Oracle</span><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:26px; text-indent:28px">目录； 这些目录重新安装的时候oracle会重新创建，所以不用担心会破坏某些环境；</span></p><p><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:26px; text-indent:28px">这个目录入股不删除的话，在重装检查环境的时候会报下面的错误，导致检查通不过：</span></p><p><span style="font-family:宋体; font-size:14px; line-height:26px; text-indent:28px"><span style="color:#ff0000"><span style="line-height:26px; font-family:宋体">正在检查<span lang="EN-US">&nbsp;Oracle&nbsp;</span>主目录的不兼容性</span><span style="line-height:26px; font-family:宋体">检查完成。此次检查的总体结果为：失败</span><span style="line-height:26px; font-family:宋体"><span lang="EN-US">&nbsp;&lt;&lt;&lt;&lt;</span>问题：<span lang="EN-US">Oracle Database 10g&nbsp;</span>发行版<span lang="EN-US">&nbsp;2&nbsp;</span>只能安装在新的<span lang="EN-US">&nbsp;Oracle&nbsp;</span>主目录中</span><span style="line-height:26px; font-family:宋体">建议案：请选择一个新的<span lang="EN-US">&nbsp;Oracle&nbsp;</span>主目录，以安装本产品。</span></span><br></span></p><p><span style="font-family:宋体; font-size:14px; line-height:26px; text-indent:28px"><span style="line-height:26px; font-family:宋体"><span style="color:#ff0000">&nbsp;</span><span style="background-color:rgb(255,0,0)">断点2</span></span></span></p><p><span style="font-family:宋体; font-size:14px; line-height:26px; text-indent:28px"><span style="line-height:26px; font-family:宋体">到此，就可以再一次进行安装了；</span></span></p><p><br></p><p>从 <span style="background-color:rgb(255,0,0)">断点1 </span><span style="background-color:rgb(255,255,255)">向下的这些内容可以用&quot;Universal Installer&quot; 完成，这样避免手动操作带来删除不干净的情况：</span></p><p><span style="background-color:rgb(255,255,255)"><img src="http://img.blog.csdn.net/20130729165013296?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVlbGFuZ2dvbmd3dQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></p><p><span style="background-color:rgb(255,255,255)">用此种方法，就避免了从</span><span style="background-color:rgb(255,0,0)">断点1</span><span style="background-color:rgb(255,255,255)">到</span><span style="background-color:rgb(255,0,0)">断点2</span><span style="background-color:rgb(255,255,255)">&nbsp;的各种手工干预了； 只要做的最后一步是，把oracle没有删除的安装目录手工删除即可，基本上就是删除$ORACLE_BASE这个目录就OK了，并且不会涉及到一些删除不掉的情况；</span></p>            <div>                作者：xuelanggongwu 发表于2013-7-29 15:15:59 <a href="http://blog.csdn.net/perfect_db/article/details/9616295">原文链接</a>            </div>            <div>            阅读：152 评论：0 <a href="http://blog.csdn.net/perfect_db/article/details/9616295#comments" target="_blank">查看评论</a>            </div>        ]]>
			</description>
			
			<category></category>
			
		</item>
		
	</channel>
	
</rss>
